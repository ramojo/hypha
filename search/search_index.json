{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Hypha is an open source submission management platform to receive and manage applications for funding. You are welcome to explore Hypha on our demo sandbox.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Manage the collection and review of applications or submissions openly and efficiently.</li> <li>Customize all aspects of the process, forms, workflows, review options, and more.</li> <li>Automate workflows and integrate with other services (Slack, Mailgun, etc).</li> <li>Regularly audited software with many privacy and security features.</li> </ul> <p>View our Roadmap for upcoming features and enhancements.</p>"},{"location":"#technology","title":"Technology","text":"<ul> <li>Built with Django, PostgreSQL and Wagtail</li> <li>Deploy with Heroku, Docker, or your own server.</li> </ul>"},{"location":"getting-started/LICENSE/","title":"LICENSE","text":"<p>BSD 3-Clause License</p> <p>Copyright \u00a9 Open Technology Fund and individual contributors. All rights reserved.</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright notice, this    list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright notice,    this list of conditions and the following disclaimer in the documentation    and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>"},{"location":"getting-started/SECURITY/","title":"Security","text":"<p>We take security very seriously. We welcome any peer review of our 100% open source code to ensure the information submitted through this platform or other who rely upon it is not compromised or that hacked.</p>"},{"location":"getting-started/SECURITY/#where-should-i-report-security-issues","title":"Where should I report security issues?","text":"<p>In order to give the community time to respond and upgrade we strongly urge you report all security issues privately. Please email disclosure@opentech.fund and/or disclosure@reset.tech with details and reproduction steps. Security issues always take precedence over bug fixes and feature work. We can and do mark releases as \"urgent\" if they contain serious security fixes.</p> <p>For a list of recent security commits, check our GitHub commits prefixed with SECURITY.</p>"},{"location":"getting-started/SECURITY/#password-storage","title":"Password Storage","text":"<p>This application relies upon Django's good use of the PBKDF2 algorithm to encrypt salted passwords. This algorithm is blessed by NIST. Security experts on the web tend to agree that PBKDF2 is a secure choice.</p>"},{"location":"getting-started/SECURITY/#security-in-django","title":"Security in Django","text":"<p>For more information on the security features within this application, please see Security in Django, which includes information on:</p> <ul> <li>Cross site scripting (XSS) protection</li> <li>Cross site request forgery (CSRF) protection</li> <li>SQL injection protection</li> <li>Clickjacking protection</li> <li>SSL/HTTPS</li> <li>Host header validation</li> <li>Session security</li> <li>User-uploaded content</li> <li>Additional security topics</li> </ul>"},{"location":"getting-started/architecture/","title":"Architecture","text":"<p>Hypha consists of three distinctive components:</p> <ol> <li> <p>First is the Apply Site, where people seeking for funds can apply by submitting their applications, the submission goes through different stages before it being approved for funding. After the applications are approved, they can be converted to a project. Apply site allows to manage the lifecycle of a project starting from a PAF to contracting to invoicing.</p> </li> <li> <p>Then the Admin or Wagtail Admin, is used to create custom forms, setup funds/labs and workflow around them. Think of it as the back-office of for your submissions and projects.</p> </li> <li> <p>Hypha also provides capability to build landing pages and display available funds and labs through public site.</p> </li> </ol> <pre><code>                            Integrations                           \n                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \n                            \u2502   Email    \u2502 \u2502   Slack    \u2502          \n                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \n                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \n                            \u2502 Amazon S3  \u2502 \u2502   Sentry   \u2502          \n                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \n\n\n\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502PUBLIC SITE \u2502\u25c0\u2500\u2500\u2500\u2500\u2510                            Databases\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502      \u2502  Django /  \u2502          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n    \u2502 APPLY SITE \u2502\u25c0\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2502  Wagtail   \u2502\u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u2502 PostgreSQL \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502                            \u2502\n    \u2502  WAGTAIL   \u2502     \u2502                             \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2518\n    \u2502   ADMIN    \u2502\u25c0\u2500\u2500\u2500\u2500\u2518\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"getting-started/architecture/#public-site","title":"Public site","text":"<p>Warning</p> <p>The public is due for removal. Read more at https://github.com/HyphaApp/hypha/pull/3110</p> <p>The Public site is intended to be a heavily cached public site with no behaviour that requires authentication, excluding the Wagtail Admin. The ultimate aim would be to serve this site statically.</p> <p>The coupling between the Public and Apply sites has been done in such as way as to minimise the interaction between the two sites and facilitate a means of separation should the need arise. Their relationship is defined in the Public fund models:</p>"},{"location":"getting-started/architecture/#apply-site","title":"Apply site","text":"<p>@TODO</p>"},{"location":"getting-started/architecture/#wagtail-admin","title":"Wagtail Admin","text":"<p>@TODO</p>"},{"location":"getting-started/architecture/#django","title":"Django","text":"<p>Hypha is built on top of the Django Web Framework. All the pages are rendered server side. It uses wagtail CMS for creating and managing custom application forms, public pages and settings.</p>"},{"location":"getting-started/architecture/#wagtail","title":"Wagtail","text":"<p>Wagtail is used in Hypha to construct and manage forms, pages, users and user roles via an admin interface (and code). In other words, Hypha uses Wagtail to build pages (using <code>blocks</code>), modify view-level behavior (using <code>hooks</code>), and create an admin interface for customizing settings like user permissions.</p> <p>Hooks: modifying the view-level behavior. Used in Hypha for copied round pages</p> <p>Blocks: components used to build the views and input fields for webpages. Wagtail blocks are used to construct the main <code>streamfield</code> block to be inherited by Pages (<code>StoryBlock</code>) \u2014 composed of: <code>ImageBlock</code>, <code>DocumentBlock</code>, <code>QuoteBlock</code>, <code>BoxBlock</code>, <code>MoreBlock</code>, <code>ApplyLinkBlock</code></p>"},{"location":"getting-started/architecture/#media","title":"Media","text":"<p>Media is encouraged to be split into two distinct storage locations. A Public and a Private location, applicant media should exist only in the Private location. This is for two reasons:</p> <ol> <li>This separates the site media, which is served publicly with no authentication, from the Applicant media, which has permissions checks, it reduces the risk of a miss-configured storage exposing the Applicant data.</li> <li>Maintains separation between the two halves of the platform, Apply and Public.</li> </ol> <p>Media should also be served from a view that inherits from the PrivateMediaView which will confirm that the file isn't made public and can be configured to return the file object from an authenticated view.</p>"},{"location":"getting-started/architecture/#url-configuration","title":"URL configuration","text":"<p>The two site have different url configurations, this limits the Apply site to a subset of the urls in the project. This is configured as part of the middleware stack using apply_url_conf_middleware. This swaps out the url configuration based on the site homepage configured in the wagtail admin.</p> <p>The default url configuration is for the Public site which are shared by the Public and Apply sites.</p> <p>The Public site has access to the \"public authentication\" urls, this enables reverse lookup of the url in templates, such as the login button, but the user is redirected to the apply site. Visiting https:///login will present a login screen.</p>"},{"location":"getting-started/architecture/#external-integrations","title":"External Integrations","text":""},{"location":"getting-started/architecture/#sentry","title":"Sentry","text":"<p>Hypha uses sentry to monitor and track errors in Django. You can either self host or use their SaaS offering.</p>"},{"location":"getting-started/architecture/#slack","title":"Slack","text":"<p>If configured, Hypha is able to send out notifications to different slack channels for activities happening on the Hypha application related to submissions and projects.</p>"},{"location":"getting-started/architecture/#email","title":"Email","text":"<p>Emails in Hypha are used for password recovery and sending out important notifications to the users.</p>"},{"location":"getting-started/contributing/code-contributions/","title":"Code Contributions","text":""},{"location":"getting-started/contributing/code-contributions/#creating-pull-requests","title":"Creating Pull Requests","text":"<p>Found a bug and know how to fix it? Have some design wireframes to improve some usability issues? Traslated Hypha into another language? Built a new feature you want to add? Please submit an issue or create a pull request on GitHub.</p> <p>Guidance for contributing code:</p> <ol> <li>Submitting Changes</li> <li>Hypha Architecture</li> </ol>"},{"location":"getting-started/contributing/code-contributions/#testing","title":"Testing","text":""},{"location":"getting-started/contributing/code-contributions/#test-class-helpers","title":"Test Class Helpers","text":"<p>BaseViewTestCase provides a useful framework for testing views. It handles the setup of requests and simplifies common url operations for views in the same installed app.</p>"},{"location":"getting-started/contributing/code-contributions/#reversing-urls","title":"Reversing URLS","text":"<p>Due to the way the urls are configured, tests for the Apply site will fail as the Apply site does not use the default URL config.</p> <p>This can be resolved on a per testcase basis using the following:</p> <pre><code>from django.test import TestCase, override_settings\n\n@override_settings(ROOT_URLCONF='hypha.apply.urls')\nclass MyTestCase(TestCase):\n  pass\n</code></pre> <p>This is implemented by default for the BaseViewTestCase</p>"},{"location":"getting-started/contributing/code-of-conduct/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"getting-started/contributing/code-of-conduct/#our-pledge","title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p>"},{"location":"getting-started/contributing/code-of-conduct/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to creating a positive environment include:</p> <ul> <li>Using welcoming and inclusive language</li> <li>Being respectful of differing viewpoints and experiences</li> <li>Gracefully accepting constructive criticism</li> <li>Focusing on what is best for the community</li> <li>Showing empathy towards other community members</li> </ul> <p>Examples of unacceptable behavior by participants include:</p> <ul> <li>The use of sexualized language or imagery and unwelcome sexual attention or  advances</li> <li>Trolling, insulting/derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or electronic  address, without explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a  professional setting</li> </ul>"},{"location":"getting-started/contributing/code-of-conduct/#our-responsibilities","title":"Our Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p> <p>Project maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.</p>"},{"location":"getting-started/contributing/code-of-conduct/#scope","title":"Scope","text":"<p>This Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.</p>"},{"location":"getting-started/contributing/code-of-conduct/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at hello@opentech.fund and/or hello@reset.tech. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.</p> <p>Project maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.</p>"},{"location":"getting-started/contributing/code-of-conduct/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html</p> <p>For answers to common questions about this code of conduct, see https://www.contributor-covenant.org/faq</p>"},{"location":"getting-started/contributing/contribute-to-documentation/","title":"Contribute to Documentation","text":"<p>Most of the work on the Hypha User Guide takes place on the project\u2019s GitHub repository. To get started, check out the list of open issues and pull requests. By contributing to the Hypha User Guide, you\u2019re expected to follow the Code of Conduct.</p> <p>The Hypha Guide welcomes contributors! There are lots of ways to help out, including:</p> <ul> <li> Reading the guide and giving feedback</li> <li> Reviewing new contributions</li> <li> Revising existing content</li> <li> Writing new content</li> <li> Translate the guide</li> </ul>"},{"location":"getting-started/contributing/contribute-to-documentation/#documentation-types","title":"Documentation types","text":"<p>This project consists of several distinct documentation types with specific purposes, inspired by a documentation framework called Di\u00e1taxis. When proposing new additions to the project please pick the appropriate documentation type.</p>"},{"location":"getting-started/contributing/contribute-to-documentation/#developer-tutorials","title":"Developer Tutorials","text":"<p>Provides step-by-step instructions on how to set up a local instance of Hypha.</p> <p>Write technical documentation with a new developer in mind. Create a quickstart doc wherever possible. What is the bare minimum information that a user needs to get started with the feature that you are documenting? Start there. </p>"},{"location":"getting-started/contributing/contribute-to-documentation/#user-guides","title":"User Guides","text":"<p>Guides are focused on accomplishing a specific task and can assume some level of prerequisite knowledge. There may be multiple approaches to accomplishing a task, and we welcome your input.</p> <p>Other adopters like the Digital Freedom Fund and Open Technology Fund have created platform guides specific to their application processes.</p>"},{"location":"getting-started/contributing/contribute-to-documentation/#discussions","title":"Discussions","text":"<p>Discussions are focused on understanding and information exchange. These explore a specific topic without a specific goal in mind. https://we.hypha.app/</p>"},{"location":"getting-started/contributing/localization-and-translation/","title":"Localization and Translation","text":"<p>Hypha offers translations into another language or translations into your organisation's vocabulary, or a combination of both. Hypha has functionalities for adopters to localize their own version with Weblate or install another translation service if they prefer. Translations could also be implemented with a text editor.</p>"},{"location":"getting-started/contributing/localization-and-translation/#getting-started-on-localization","title":"Getting Started on Localization","text":"<p>Translations of Hypha can be of two kinds. Translations in to another language or translations in to you organisations vocabulary, or a combination of both.</p> <p>Our team is currently using Weblate to manage translations of this project. Please visit Hypha's Weblate https://hosted.weblate.org/projects/hypha/ to start the translation process. You will need a Weblate account, and take it from there. Weblate instructions and related documentation on translation is a great introductory resource. project on Weblate to contribute. If you are experiencing issues while you are working on translations, please open an issue on [GitHub}.</p> <p>Adopters could also consider installing another translation service or apps for Linux/Windows/macOS po-files. In the How to Edit the .po file in hypha/locale we describe how translators can edit directly with a text editor. All translations will eventually be stored as django.po files.</p>"},{"location":"getting-started/contributing/localization-and-translation/#adding-a-language","title":"Adding a language","text":"<p>If your language is not listed on packaging.python.org, click the button Start new translation at the bottom of the language list and add the language you want to translate.</p> <p></p> <p></p>"},{"location":"getting-started/contributing/localization-and-translation/#how-to-edit-the-po-file-in-hyphalocale","title":"How to Edit the .po file in hypha/locale","text":"<p>Hypha has translations to common strings propagated across other components within it by default. This lightens the burden of repetitive and multi version translation. The translation propagation can be disabled per Component configuration using Allow translation propagation in case the translations should diverge.</p> <p>Hypha's list of translatable strings is available here.</p> <p>In cases where text strings are not yet translatable, a quick method to find out would be search in the .po file here. As an Adopter you could also edit \u201c<code>hypha/locale/en</code>\u201d and \u201c<code>hypha/locale/[your_lang_code]</code>\u201d any way you like.</p>"},{"location":"getting-started/contributing/submitting-changes/","title":"Submitting Changes","text":"<p>We use pull requests for all changes. No commits are done directly in to the main branches. The \"master\" branch is protected and only maintainers can merge to it.</p> <ol> <li> <p>Use descriptive branch names - We commonly use <code>fix/*</code>, <code>enhancement/*</code>, <code>feature/*</code>, <code>bug/*</code> and <code>updates/*</code> as base for the branch names. A good idea is to include the GitHub issue number in the format \"<code>*/gh-1234-*</code>\".</p> </li> <li> <p>Use descriptive commit messages - Write it so other developers, and your future self, can understand what was changes and why.</p> </li> <li> <p>Rebase your branch before creating the PR - A rebase makes sure the PR is up to date and has no merge conflicts. Please do a rebase and not just a merge, this gives a clean and readable commit history.</p> </li> <li> <p>Link the PR to the corresponding issue - A common way is to add \"Fixes #1234\" at the top of the PR description. See Linking a pull request to an issue</p> </li> <li> <p>Add a reviewer - If noting else has been agreed upon add Fredrik Jonsson @frjo.</p> </li> </ol>"},{"location":"getting-started/contributing/submitting-changes/#git-command-examples","title":"Git command examples","text":""},{"location":"getting-started/contributing/submitting-changes/#creating-a-new-branch-from-master","title":"Creating a new branch from master","text":"<p>First check out master and do a git pull ot get all the latest updates.</p> <p>Then create a new branch and do a checkout of it.</p> <pre><code>$ git checkout master\n$ git pull\n$ git checkout -b fix/gh-1234-fixing-thing-a\n</code></pre>"},{"location":"getting-started/contributing/submitting-changes/#adding-commits","title":"Adding commits","text":"<pre><code>$ git add\n$ git commit -m \"A good commit message.\"\n</code></pre>"},{"location":"getting-started/contributing/submitting-changes/#pushing-branch-first-time-to-github","title":"Pushing branch first time to GitHub","text":"<p>First make sure we are in the correct branch. Then push the branch to origin, i.e. GitHub in this case.</p> <p>(Pushing to <code>HEAD</code> is equivalent to pushing to a remote branch having the same name as your current branch.)</p> <pre><code>$ git checkout fix/gh-1234-fixing-thing-a\n$ git push -u origin HEAD\n</code></pre> <p>The message in the Terminal will contain the URL to create an PR. On most systems you can Command/CTRL click that to open it directly in your default browser.</p>"},{"location":"getting-started/contributing/submitting-changes/#rebase-branch-if-needed","title":"Rebase branch if needed","text":"<p>Checkout master and update it. Checkout the branch you are working on and issue the command to rebase it from master. If that resulted in any changes you will then need to do a force push to GitHub.</p> <pre><code>$ git checkout master\n$ git pull\n$ git checkout fix/gh-1234-fixing-thing-a\n$ git rebase master\n$ git push --force\n</code></pre> <p>Read more about Git rebase.</p>"},{"location":"getting-started/development/docker/","title":"With Docker","text":"<p>Require most recent version of Docker.</p>"},{"location":"getting-started/development/docker/#domains-for-local-development","title":"Domains for local development","text":"<p>You will need two domain to run this app. One for the public site and one for the apply site.</p> <p>Add this to your <code>/etc/hosts</code> file.</p> <pre><code>127.0.0.1 hypha.test\n127.0.0.1 apply.hypha.test\n</code></pre> <p>The \"test\" TLD is safe to use, it's reserved for testing purposes.</p> <p>OBS! All examples from now on will use the <code>hypha.test</code> domains.</p>"},{"location":"getting-started/development/docker/#get-the-code","title":"Get the code","text":"<pre><code>$ git clone https://github.com/HyphaApp/hypha.git hypha\n\n$ cd hypha\n</code></pre>"},{"location":"getting-started/development/docker/#create-media-directory","title":"Create media directory","text":"<p>In production media is stored on AWS S3 but for local development you need a \"media\" directory.</p> <pre><code>$ mkdir media\n</code></pre>"},{"location":"getting-started/development/docker/#docker","title":"Docker","text":""},{"location":"getting-started/development/docker/#build-the-docker-images","title":"Build the Docker images","text":"<p>Run the docker compose command to build the images. This will take some time.</p> <p>If you need to rebuild the images to get a later version just run the \"build\" again.</p> <pre><code>$ docker-compose --file docker/docker-compose.yaml build\n</code></pre> <p>The build command needs to be run from Hypha root so it can copy needed files. The other commands are easier to run directly from the \"docker\" sub directory.</p>"},{"location":"getting-started/development/docker/#start-the-docker-environment","title":"Start the docker environment","text":"<p>Move to the \"docker\" directory.</p> <pre><code>$ cd docker\n</code></pre> <p>To start the docker containers you use the \"up\" command. This command you will use each time you want to start up and use this docker environment.</p> <pre><code>$ docker-compose up\n</code></pre>"},{"location":"getting-started/development/docker/#access-the-docker-environment","title":"Access the docker environment","text":"<p>Go to http://hypha.test:8090/</p>"},{"location":"getting-started/development/docker/#run-commands-in-the-docker-environment","title":"Run commands in the docker environment","text":"<p>To get bash shell on the container that runs the Django app, use this command.</p> <pre><code>docker-compose exec py bash\n</code></pre> <p>Here you can issue django commands as normal. You might want to change the user - the default is circleci, but most of the code is owned by the user 'node'. To do that:</p> <p><code>docker-compose exec -u node py bash</code></p> <p>To get a shell on the container that runs Postgres, use this command.</p> <pre><code>docker-compose exec db bash\n</code></pre>"},{"location":"getting-started/development/docker/#stop-the-docker-environment","title":"Stop the docker environment.","text":"<p>Press <code>ctrl+c</code> in the terminal window.</p>"},{"location":"getting-started/development/docker/#restore-a-database-dump-in-docker","title":"Restore a database dump in Docker","text":"<p>We will use the \"public/sandbox_db.dump\" for this example. That is a good start in any case, you get some example content etc.</p> <p>First get a shell on the db container.</p> <pre><code>docker-compose exec db bash\n</code></pre> <p>Then in that shell you need to install <code>wget</code> to download the db dump.</p> <pre><code>apt update\napt install wget\n</code></pre> <p>Then download the sandbox db dump from Github.</p> <pre><code>wget https://github.com/HyphaApp/hypha/raw/sandbox/public/sandbox_db.dump\n</code></pre> <p>Before being able to work on this database, you have to drop and prevent any other connections to it.</p> <pre><code>psql\n# REVOKE CONNECT ON DATABASE hypha FROM public;\n# SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'hypha';\n# \\q\n</code></pre> <p>With this done, drop and then create the hypha database and run the pg restore command like this.</p> <pre><code>dropdb --user=hypha hypha\ncreatedb --user=hypha hypha\npg_restore --verbose --clean --if-exists --no-acl --no-owner --dbname=hypha --username=hypha sandbox_db.dump\n</code></pre> <p>After restoring the sandbox db run the migrate command inside the py container.</p> <pre><code>docker-compose exec py bash\npython manage.py migrate\n</code></pre>"},{"location":"getting-started/development/manual/","title":"Without Docker","text":"<p>In order to have get started with developing hypha locally, you'll need these minimal setup, the setup may vary slightly for your base operating systems.</p>"},{"location":"getting-started/development/manual/#system-dependencies","title":"System Dependencies","text":"<p>Make sure you have these things installed on your system:</p> <ul> <li>Git \u2013 Installation Guide</li> <li>Python 3.11.x</li> <li>Node 18.x</li> <li>PostgreSQL 14.x (with <code>libpq-dev</code> on Linux)</li> </ul> <p>Info</p> <p>On Linux install them with your normal package manager. On macOS Homebrew is an excellent option. For Windows Chocolatey seems popular but we have no experience with Windows. </p> <p>This project ships with <code>.python-version</code> and <code>.nvmrc</code> to support pyenv and nvm. You can use it to setup the correct versions of Python and Node required for this project.</p>"},{"location":"getting-started/development/manual/#get-source-code","title":"Get Source Code","text":"<p>Use <code>git</code> to fetch the code, this will create a <code>hypha/</code> directory.</p> <pre><code>$ git clone https://github.com/HyphaApp/hypha.git hypha\n</code></pre> <p>Now, create some local directories.</p> <pre><code>$ cd hypha\n$ mkdir -p var/log media\n</code></pre> <p>NOTE: In production media is stored on AWS S3 but for local development you need a \"media\" directory. The <code>var/log</code> is used to store local logs, if configured.</p> <p>OBS! Everything from now on will happen inside the <code>hypha/</code> directory.</p>"},{"location":"getting-started/development/manual/#install-project-dependencies","title":"Install project dependencies","text":"<p>Create and activate python virtual environment:</p> <pre><code>$ python -m venv venv/\n$ source venv/bin/activate\n</code></pre> <p>Install Python &amp; Node packages:</p> <pre><code>$ pip install -r requirements-dev.txt\n$ npm install\n</code></pre>"},{"location":"getting-started/development/manual/#compile-js-scss","title":"Compile JS &amp; SCSS","text":"<p>Build all JS/CSS assets for development:</p> <pre><code>$ npm run dev:build\n</code></pre> <p>Info</p> <p>Hypha uses NodeJS to compile SCSS and JS from the <code>hypha/static_src/</code> directory. See the <code>package.json</code>  file for a complete list of commands.</p>"},{"location":"getting-started/development/manual/#addupdate-configuration","title":"Add/Update Configuration","text":"<p>Hypha supports configuration via either a <code>local.py</code> or a <code>.env</code> file:</p> Using <code>.env</code> fileUsing <code>local.py</code> <p>Create an empty <code>.env</code> file at the root of the project:</p> <pre><code>.\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 manage.py\n\u251c\u2500\u2500 hypha\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings/\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\n\u251c\u2500\u2500 ...\n</code></pre> <p>Open <code>.env</code> file and add your config:</p> ./.env<pre><code>ALLOWED_HOSTS=apply.hypha.test,hypha.test\nBASE_URL=http://hypha.test\nSECRET_KEY=&lt;put-in-long-random-string&gt;\nDATABASE_URL=postgres://localhost/hypha\n</code></pre> <p>Copy the provided <code>local.py.example</code> file and rename it to <code>local.py</code>.</p> <pre><code>$ cp -p hypha/settings/local.py.example hypha/settings/local.py\n</code></pre> <pre><code>.\n\u251c\u2500\u2500 manage.py\n\u251c\u2500\u2500 hypha\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 base.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 dev.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 django.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 local.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 local.py.example\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 production.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\n\u251c\u2500\u2500 ...\n</code></pre> <p>Open and take a look at the <code>local.py</code>, it already has some sensible defaults and you can use this to override all the settings.</p>"},{"location":"getting-started/development/manual/#setup-database-and-initial-data","title":"Setup Database and Initial Data","text":"<p>Create an empty database:</p> <pre><code>$ createdb hypha\n</code></pre> <p>Ensure database name <code>hypha</code> is added to your <code>hypha/settings/local.py</code> or <code>.env</code>.</p> <p>Let's create all the tables and schemas required by the project.</p> <p>There are two ways to about it, you can either load demo data from  <code>/public/sandbox_db.dump</code> or start with empty tables.</p> Load Demo DataFrom Scratch <p>To load demo data run:</p> <pre><code>$ pg_restore --verbose --clean  --if-exists --no-acl --no-owner \\\n             --dbname=hypha public/sandbox_db.dump\n</code></pre> <p>It's not always completely up to date so run:</p> <pre><code>$ python manage.py migrate\n</code></pre> <p>Create the cache tables.</p> <pre><code>$ python manage.py createcachetable\n</code></pre> <p>Run all migrations to set up the database tables.</p> <pre><code>$ python manage.py migrate\n</code></pre> <p>Tips</p> <ul> <li>If <code>createdb</code>and <code>dropdb</code> are not available you will need to add the Postgres bin directory to your <code>path</code> or call the commands with complete path.</li> <li>If you need to delete/drop the database, you can use <code>$ dropdb hypha</code></li> <li> <p>On Linux you might need to run as the \"postgres\" user first when setting up Postgres. Use it to create the database and set up a database user.For local development I suggest creating a user with the same name as your account, then you will not need to specify it on every command.</p> <pre><code>$ su - postgres\n$ createdb hypha\n$ createuser [your-account-name]\n</code></pre> </li> </ul>"},{"location":"getting-started/development/manual/#setup-sites","title":"Setup Sites","text":"<p>You will need two domain to run this app, used to serve the public and apply site on different domains</p> <p>First, add these sites to the database:</p> <pre><code>$ python manage.py wagtailsiteupdate hypha.test apply.hypha.test 9001\n</code></pre> <p>Then, add this to your <code>/etc/hosts</code> file.</p> /etc/hosts<pre><code>127.0.0.1 hypha.test\n127.0.0.1 apply.hypha.test\n</code></pre> <p>Here we are setting the public site be served at http://hypha.test:9001 and apply site to http://apply.hypha.test:9001.</p> <p>Is it safe to use .test?</p> <p>The \".test\" TLD is safe to use, it's reserved for testing purposes. Feel free to use another name but then remember to use it in all the commands below.</p>"},{"location":"getting-started/development/manual/#create-login-credentials","title":"Create Login credentials","text":"<pre><code>$ python manage.py createsuperuser\n</code></pre>"},{"location":"getting-started/development/manual/#run-development-server","title":"Run Development Server","text":"<pre><code>$ python manage.py runserver 0.0.0.0:9001 --settings=hypha.settings.dev\n</code></pre> <p>Alternatively, you can also use <code>$ make serve-django</code></p> <p>Now you should be able to access the sites:</p> <ol> <li>Public Site: http://hypha.test:9001/ </li> <li>Apply Site: http://apply.hypha.test:9001/</li> </ol>"},{"location":"getting-started/development/manual/#documentation","title":"Documentation","text":"<p>To live preview of documentation, while you writing it.</p> <p>Activate your virtual environment and install dependencies:</p> <pre><code>$ source venv/bin/activate\n$ python -m pip install -r requirements-dev.txt\n</code></pre> <p>Run: <pre><code>$ make serve-docs\n</code></pre></p> <p>Open http://localhost:9100/ to preview the documentation site.</p> <p>Tip</p> <p>You can use <code>$ make serve</code> command to run Django Development Server, watch and compile frontend changes and preview docs all at once.</p>"},{"location":"getting-started/development/manual/#coding-style","title":"Coding Style","text":"<p>Hypha's coding style is enforced by black, ruff and prettier and comes pre-configured with prettier. </p> <p>Install pre-commit to auto-format the code before each commit:</p> <pre><code>pre-commit install\n</code></pre>"},{"location":"getting-started/development/manual/#running-tests","title":"Running tests","text":"<p>Hypha uses <code>ruff</code> and py.test test runner and uses <code>hypha/settings/testing.py</code> for test settings. For frontend code, stylelint and eslint is used. </p> <p>Run the test with:</p> <pre><code>$ make test\n</code></pre> <p>For lint the code and not run the full test suite you can use:</p> <pre><code>$ make lint\n</code></pre>"},{"location":"getting-started/development/manual/#helpful-urls","title":"Helpful URLs","text":"<ul> <li>The Apply dashboard: http://apply.hypha.test:9001/dashboard/</li> <li>The Apply Wagtail admin: http://apply.hypha.test:9001/admin/</li> <li>The Django Administration panel: http://apply.hypha.test:9001/django-admin/</li> </ul> <p>Use the email address and password you set in the <code>createsuperuser</code> step above to login.</p>"},{"location":"references/accessibility/","title":"Accessibility","text":"<p>In 2019, Accessibility Lab carried out a Web Content Accessibility Guidelines (WCAG) 2.1 Audit of Hypha. This document serves as a summary of the high-impact issues that were highlighted in the report.</p>"},{"location":"references/accessibility/#information-structure-and-relationships","title":"Information, structure and relationships","text":"<p>Labels must be programmatically associated with their control - every form input and control needs a label, or an accessible name. The best way to implement this is to use the html <code>&lt;label&gt;</code> element, because that\u2019s what it was designed to do. Use <code>&lt;fieldset&gt;</code> to semantically group the form fields and use a <code>&lt;legend&gt;</code> to provide a semantic group label. </p>"},{"location":"references/accessibility/#sensory-characteristics","title":"Sensory characteristics","text":"<p>Instructions provided for understanding and operating content do not rely solely on sensory characteristics of components such as shape, size, visual location, orientation, or sound. Using a graphical symbol can make content difficult to comprehend (i.e. search icon without a visible descriptive text). An image with a text alternative can help in this case.</p>"},{"location":"references/accessibility/#use-of-color","title":"Use of color","text":"<p>Color was used as the only visual means of conveying information, indicating an action, prompting a response, or distinguishing a visual element. As an solution, <code>a:hover</code> and <code>a:focus</code> styles were changed to make the hover state more visible and not just depend on color. </p>"},{"location":"references/accessibility/#visual-presentation","title":"Visual presentation","text":"<p>It was noted in the report that the colors of user interface components needed to have more contrast with each other. The contrast of text to background (both for the contrast minimum and contrast enhanced) was increased as a result.</p>"},{"location":"references/accessibility/#keyboard-accessiblity","title":"Keyboard accessiblity","text":"<p>The report found that almost all functionality of the content is operable through a keyboard interface, but in order to comply with this requirement 100%, <code>ContentEditable</code> (text editor) needs to be made accessible with a keyboard.</p>"},{"location":"references/accessibility/#name-role-value","title":"Name, role, value","text":"<p>For all user interface components (including but not limited to: form elements, links, and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set, and notification of changes to these items is available to user agents, including assistive technologies. The only issue that was found was with <code>ContentEditable</code> (text editor) \u2014 issues found with getting to the toolbar with just a keyboard and issues with lacking visual focus.</p>"},{"location":"references/accessibility/#navigation","title":"Navigation","text":"<p>A mechanism is available to bypass blocks of content that are repeated on multiple web pages - a keyboard functional \u201cskip\u201d link should be provided to allow keyboard users to navigate directly to the main content. </p>"},{"location":"references/accessibility/#link-purpose-in-context","title":"Link purpose (in context)","text":"<p>The purpose of each link can be determined from the link text alone or from the link text together with its programmatically determined link context, except where the purpose of the link would be ambiguous to users in general. </p>"},{"location":"references/accessibility/#headings-and-labels","title":"Headings and labels","text":"<p>Headings should describe topic or purpose and should not skip hierarchical levels, use headings in proper hierarchical order, (<code>&lt;h1&gt;</code> to <code>&lt;h6&gt;</code>). The content under a heading relates logically to the heading above it. <code>&lt;h2&gt;</code> content relates logically to <code>&lt;h1&gt;</code> above it. In this way, the heading structure of a document can be used as a method to organize the documents\u2019 contents hierarchally much like an outline. </p>"},{"location":"references/accessibility/#focus-visible","title":"Focus visible","text":"<p>This requirement specifies that any keyboard operable user interface has a mode of operation where the keyboard focus indicator is visible. It was highlighted in the report that all links on <code>a:hover</code> and <code>a:focus</code> need a style that does not only depend on color. This was implemented as a result. </p>"},{"location":"references/accessibility/#label-in-name","title":"Label in name","text":"<p>For UI components with labels that include images or images of text, the name contains the text that is presented visually. </p>"},{"location":"references/accessibility/#target-size","title":"Target size","text":"<p>The size of the target for pointer inputs is at least 44x44 CSS pixels except in special cases. It was noted that some icons on mobile need to be bigger and more separated to allow for easy use with a finger without risking selecting an adjacent link or button.</p>"},{"location":"references/accessibility/#labels-and-instructions","title":"Labels and instructions","text":"<p>Labels or instructions need to be provided to help users understand how to complete the form and use individual form controls. It was recommended to display which input fields are required using <code>aria-required=true</code>.</p>"},{"location":"references/accessibility/#input-assistance-error-identification","title":"Input assistance (error identification)","text":"<p>If an input error is automatically detected, the error is identified and described to the user in text. It was recommended to use <code>aria-describedby</code> to programmatically associate the error message with the input field. This was implemented as well as moving the focus to the first field with an error. </p>"},{"location":"references/accessibility/#error-suggestion","title":"Error suggestion","text":"<p>If an input error is automatically detected and suggestions for correction are known, then the suggestions are provided to the user, unless it would jeopardize the security or purpose of the content. </p>"},{"location":"references/accessibility/#error-prevention","title":"Error prevention","text":"<p>For web pages that require the user to submit information, at least one of the following is true:</p> <ul> <li>Reversible- submissions are reversible</li> <li>Checked- data entered by the user is checked for input errors and the user is provided an opportunity to correct them</li> <li>Confirmed- a mechanism is available for reviewing, confirming, and correcting information before finalizing the submission </li> </ul>"},{"location":"references/accessibility/#parsing","title":"Parsing","text":"<p>For content written in markup languages, the content needs to be parsed into a data structure.</p>"},{"location":"references/glossary/","title":"\ud83d\udcd6 Glossary","text":"Batch Action A grouping of applications organized based on some defined criteria Category Applicants have four themes they can select when applying to the Internet Freedom Fund. These categories include Applied Research, Technology, Digital Security, and Community Convening. Determination: Correspondence and communication between OTF and external stakeholders. Funds Includes Funds (IFF, CIF, Community Prototype Fund) and Labs (Community Lab, Legal Lab and Learning Lab). Rounds Temporal breakup for applications in a fund (applications in a round use the same application form for the sake of fairness) Include most funds, but these submissions, like perennials, appear in different forms each time. OTF\u2019s rounds appear as IFF-2018-05, IFF-2019-05, or IFF-2020-05 on the platform. Statuses Status on the workflow, examples are Internal Review and Ready for Determination. Leads Name of Round Lead associated with a particular submission. Reviewers Name of anyone designated with the WebApp authorized to submit a review. Reviewers include OTF staff and Advisory Council Members. Screening The process of culling and identifying whether an application falls within remit or out of remit. Other outside remit tags are ICT4D and Advocacy. Screening also refers to the default status, meaning the first status within the workflow, for all applications submitted. Submitted Date when application was submitted into the WebApp. This date is static. Last updated Date is dynamic, this date changes when an edit, revision, or another change has been made to the application within the system. Remit Parameters for applications that align with OTF\u2019s core values and mission. Service Providers an entity with a commercial relationship with the funding organization, to provide services directly to the funding organization, or the partners it funds Concept Note the first stage of a 2 stage application process. the initial application form an applicant uses to apply for funding. The concept note (CN) is short and asks high-level questions. It's purpose is to simplify the application process for the applicant. If the CN is accepted the applicant is invited to submit a full proposal. Full Proposal the second stage of a 2-stage application process. in the full proposal (FP) Project 1) a piece of work that is either proposed, underway, or completed, undertaken by a partner, 2) term used to describe an entity that has received funding from OTF Contract A written agreement between a partner and a funding organisation concerning the undertaking of activities, carried out by the partner for the funding organisation, in exchange for financial payment Staff role is able to edit applications, submit reviews, manage the workflow, create forms/funds/rounds. They have a high administrative access to the full fund management system. Advisory Council / External Reviewer An individual (not a member of staff of the funding organisation), with expertise in a given area, who is invited to review funding applications Team Admin role that can edit proposals during a workflow stage that \"staff\" and \"applicant\" cannot; authorize when a page could be published on the live website Applicant an entity who submits a request for financial support, thru the funding application process, to fund an amount of work. Approver an individual, usually member of staff, who can authorize a contract or payment request Partner For OTF, in the application phase, \"partner\" could view the application but is unable to submit a review and could submit payment requests. This role can see, edit, and communicate about a specific application. Finance role for staff with finance related functions. In Hypha they have dashboard to enable approval of invoices."},{"location":"references/notifications/","title":"Notifications","text":"<p>Notifications are sent through batch channels that use various adapters for each communication channel.  Each adapter is defined in its own module via a class definition that inherits from base class <code>AdapterBase</code>.  Currently the communication channels we support are email (default), Slackbot, and in-app notifications. On the admin interface, messages can be scheduled and the adapter can be reconfigured.</p> <p>The types of messages are as follows:</p> <ul> <li><code>SUCCESS</code></li> <li><code>ERROR</code></li> <li><code>WARNING</code></li> <li><code>INFO</code></li> </ul> <p>The options for statuses for messages are as follows:</p> <ul> <li><code>APPROVED_BY_FINANCE</code></li> <li><code>APPROVED_BY_FINANCE_2</code></li> <li><code>APPROVED_BY_STAFF</code></li> <li><code>CHANGES_REQUESTED_BY_FINANCE</code></li> <li><code>CHANGES_REQUESTED_BY_FINANCE_2</code></li> <li><code>CONVERTED</code></li> <li><code>PAID</code></li> <li><code>RESUBMITTED</code></li> <li><code>SUBMITTED</code></li> </ul> <p>Messages are rendered using a template defined in <code>hypha/apply/activity/templates/messages</code>.</p>"},{"location":"references/notifications/#notifications-and-reminders-for-invoicing-and-contracting","title":"Notifications and reminders for invoicing and contracting","text":"<p>These notifications exist to update users on their invoice status and transitions throughout the web app, notifying them if they are required to do anything. </p> <p>The default method for notifications are via the email address provided. The communication style is to provide the minimum level of detail in the email and make it required to log in to read the full message. </p> <p>Invoice states and who needs to be notified: (states 1-17) 1 \u2026 17 </p> <p>[add diagram]</p>"},{"location":"references/notifications/#translation-localization-files-for-automated-messages","title":"Translation / localization files for automated messages","text":"<p><code>wagtail-localize</code> is a translation plug-in for the Wagtail CMS, allowing pages or snippets to be translated within Wagtail\u2019s admin interface. Localization happens in <code>hypha/hypha/apply/funds/templates/funds/tables/table.html</code> and <code>hypha/hypha/public/partner/templates/partner/table.html</code> if a column has a <code>localize</code> property. </p> <p>For translation, we are using <code>django.utils</code> translation library. For this, it is required to set up hooks called translation strings that signify to Django that certain text snippets that are marked should be translated into the end user\u2019s language if possible. </p> <p>Messages are translated when the email is constructed in <code>make_email_object</code> in <code>hypha/hypha/core/mail.py</code> </p> <pre><code>def make_email_object(self, to: str | List[str], context, **kwargs):\n    if not isinstance(to, (list, tuple)):\n        to = [to]\n\n    lang = context.get('lang', None) or settings.LANGUAGE_CODE\n\n    with language(lang):\n        rendered_template = self._render_template(context)\n        body_txt = cleanup_markdown(rendered_template)\n        body_html = markdown_to_html(rendered_template)\n\n    email = EmailMultiAlternatives(**kwargs)\n    email.body = body_txt\n    email.attach_alternative(body_html, 'text/html')\n\n    email.to = to\n\n    return email\n</code></pre>"},{"location":"references/security/","title":"Security","text":"<p>In 2021, Radically Open Security carried out a penetration test for the Hypha web app and its user roles. This test resulted in 1 elevated, 5 moderate and 13 low-severity issues. This document outlines the details of the findings and their implemented solutions.</p>"},{"location":"references/security/#elevated-threat-level-issues","title":"Elevated Threat Level Issues","text":"<ol> <li>Several form fields that use TinyMCE allow the input of dangerous characters resulting in XSS when editing a form.<ul> <li>This would allow an unauthenticated or low privileged user to send a malicious XSS payload (e.g. containing session hijacking, credential stealing, malware) to high privileged users (e.g. staff members and admins). This could result in gaining access to high privileged accounts which would lead to accessing restricted data. <p>Update: This issue was resolved in PR #2495 which updated TinyMCE to newer version, PR #2508, using the invalid elements attribute of TinyMCE to validate input, and PR #2518 which disabled the TinyMCE <code>contextmenu</code>.</p> </li> </ul> </li> </ol>"},{"location":"references/security/#moderate-threat-level-issues","title":"Moderate Threat Level Issues","text":"<ol> <li> <p><code>opentech.fund</code> and <code>apply.opentech.fund</code> accept connections encrypted using TLS 1.0 and/or TLS 1.1. TLS 1.0 has a number of cryptographic design flaws. Modern implementations of TLS 1.0 mitigate these problems, but newer versions of TLS (TLS 1.2) are designed against these flaws and should be used whenever possible.</p> <ul> <li>Accepting TLS 1.0 and TLS 1.1 makes the data in transit vulnerable to attacks in which an attacker can capture the encrypted data and decrypt it. <p>Update: This issue was resolved by disabling TLS 1.0 and 1.1</p> </li> </ul> </li> <li> <p><code>opentech.fund</code> and <code>apply.opentech.fund</code> support insecure 3DES ciphers.</p> <ul> <li>An attacker with a MitM (Machine in the Middle) position can potentially capture and intercept communication between server and clients. <p>Update: This issue was resolved by disabling the use of the insecure 3DES ciphers.</p> </li> </ul> </li> <li> <p>There are no additional authentication checks, such as requiring a password or two-factor token, preventing logged in users from changing their email address. Email addresses are used for account recovery operations that can be abused by attackers.</p> <ul> <li>An attacker who gains temporary access to a victim's account (be it by exploiting a different vulnerability or by gaining physical access to the victim's machine, a common scenario in office settings) can change the victim's email address to a different address controlled by the attacker, enabling them to take full control of the victim's account by using the forgot password functionality. <p>Update: Resolved with PR #2653 ensuring the current password or a two-factor authentication token is required whenever a user attempts to change their email address.</p> </li> </ul> </li> <li> <p>Two-factor authentication (2FA) can be disabled without providing the current password.</p> <ul> <li>This could allow an adversary to disable the user's 2FA, for instance by using a XSS attack or other attack. <p>Update: Resolved with PR #2661 requiring the user to provide their current password or token before 2FA can be disabled to add an additional layer of security.</p> </li> </ul> </li> <li> <p>The application incorrectly validates input that can affect the control flow or data flow of a program</p> <ul> <li>Allowing dangerous input could lead to XSS <p>Update: Resolved with PR #2508 using invalid elements attribute of TinyMCE to validate input. </p> </li> </ul> </li> </ol>"},{"location":"references/security/#low-threat-level-issues","title":"Low Threat Level Issues","text":"<ol> <li> <p>Obsoleted CBC ciphers</p> <ul> <li>TLS misconfiguration - <code>apply.opentech.fund</code> are configured to support cipher block chaining encryption (CBC)  <p>Status: At the time of the report, unresolved.</p> </li> </ul> </li> <li> <p>Open redirect</p> <ul> <li>Subscribe newsletter is vulnerable to open redirection. <p>Recommendation: Do not use user input for URLs. If dynamic URLs are required, use whitelisting. </p> </li> </ul> </li> <li> <p>Insecure password reset </p> <ul> <li>The password reset functionality is by default set to 8 days and the reset token remains the same until it has been changed. The link does change after the password (including the same password) has been reset.  <p>Update: Configured password reset timeout to a maximum of 1 hour.</p> </li> </ul> </li> <li> <p>Lack of anti-automation </p> <ul> <li>Someone can maliciously automate use of functionality such as password reset, 2FA, 2FA backup login, newsletter subscription, apply forms and user login. 200 password requests were issued within 5 seconds and resulted in a flooded mailbox.  <p>Suggestion: Apply anti-automation on those features. One common way is implementing a Captcha and only show and enforce after a certain amount of requests per IP. </p> </li> </ul> </li> <li> <p>XSS in footer </p> <ul> <li>The footer incorrectly validates input that results in cross-site scripting (XSS). This XSS can only be created and triggered by high-privileged users (staff and admin), which makes it low impact. However it is recommended to not allow XSS in the first place, since a successful attack could lead to session hijack, credential stealing, or infecting systems with malware.  </li> </ul> </li> <li> <p>Low-privileged user able to purge CDN and cache </p> <ul> <li>Staff members (high-privileged users), editors and moderators do not see the purge CDN and cache functionality in the UI but are still able to use the functionality by using the following URLs:<ul> <li><code>http://apply.hypha.test:8090/admin/cache/</code></li> <li><code>http://apply.hypha.test:8090/admin/purge/</code></li> </ul> </li> </ul> </li> <li> <p>XSS in <code>Used By</code></p> <ul> <li>The <code>Used By</code> field incorrectly validates input that results in XSS. This XSS can only be created and triggered by high-privileged users (staff and admin), which makes it low impact. However it is recommended to not allow XSS in the first place, since a successful attack could lead to session hijack, credential stealing, or infecting systems with malware.  </li> </ul> </li> <li> <p>XSS in Reviewer Role </p> <ul> <li>This XSS can only be created and triggered by high-privileged users (staff and admin), which makes it low impact. However it is recommended to not allow XSS in the first place, since a successful attack could lead to session hijack, credential stealing, or infecting systems with malware.  </li> </ul> </li> <li> <p>User Enumeration with Email Address Change </p> <ul> <li>Valid users can be found by abusing the Profile change email address functionality.  <p>Recommendation: Modify the functionality to return only a generic response making it impossible to distinguish between a valid username and invalid username and implement a Captcha. </p> </li> </ul> </li> <li> <p>XSS in Review Form </p> <ul> <li>This XSS can only be created and triggered by high-privileged users (staff and admin), which makes it low impact. However it is recommended to not allow XSS in the first place, since a successful attack could lead to session hijack, credential stealing, or infecting systems with malware.  </li> </ul> </li> <li> <p>Django <code>SECRET_KEY</code> not random </p> <ul> <li><code>SECRET_KEY</code> is hardcoded and using a default value. The secret key is used for all sessions if you are using any other session backend than <code>django.contrib.sessions.backends.cache</code>, or are using the default <code>get_session_auth_hash()</code>, all messages if you are using <code>CookieStorage</code> or <code>FallbackStorage</code>, all <code>PasswordResetView</code> tokens, and any usage of cryptographic signing, unless a different key is provided. <p>Recommendation: Automatically generate Strong Random Secret key instead of using a static key.</p> </li> </ul> </li> <li> <p>Arbitrary document file upload </p> <ul> <li>No restrictions configured on the document file upload functionality. <code>.exe</code> files were successfully uploaded via the document upload functionality.  <p>Recommendation: Verify all upload functionality. </p> </li> </ul> </li> <li> <p>Outdated packages are in use </p> <ul> <li><code>npm audit report</code> \u2014 found outdated packages which contain known vulnerabilities. Marked as low because it appears that no functionality is used in the current code that could exploit any of the vulnerabilities. </li> </ul> </li> </ol>"},{"location":"references/security2fa/","title":"Two Factor Authentication (2FA)","text":"<p>After an account is created, the user must activate their account by clicking the link sent to their email to reset their password. From there, 2FA can be activated/enabled. Authentication codes via a token generator app are required. </p> <p>2FA is implemented using <code>django-two-factor-auth</code> version <code>1.14.0</code>, which is built on top of the one-time password framework <code>django-otp</code> and Django\u2019s built-in authentication framework <code>django.contrib.auth</code>.</p> <p>2FA is required to view certain pages \u2014 without 2FA enabled, a user will only be able to view their own profile and log out. </p> <p>Staff admins can disable 2FA from the admin dashboard in the event that a user loses their phone. The process is as follows:</p> <ul> <li>User notifies support they\u2019ve lost access to their TOTP device. </li> <li>Staff authenticates user </li> <li>Staff disables user\u2019s 2FA </li> <li>User is notified their 2FA is disables and they now have to re=enable it</li> <li>User recovers access to their account and is forces to re-enable 2FA</li> <li>User needs to pair new TOTP device to their account </li> <li>User now has access to their account and 2FA is enabled </li> </ul> <p>In the case that a user does not have a smartphone (no camera to scan QR code) \u2014 the user flow is as follows: </p> <ul> <li>User goes to set up 2FA page </li> <li>User clicks on Advanced dropdown </li> <li>User copies otpauth url in string format and pastes into password manager or any TOTP (time-based one time password) application. </li> <li>User receives secret token from TOTP application / pass manager </li> <li>User pastes secret token into hypha to enable 2FA on their account.</li> </ul>"},{"location":"references/user-roles/","title":"User Roles","text":""},{"location":"references/user-roles/#user-roles-vs-user-groups","title":"User Roles vs. User Groups","text":"<p>User Group refers to every account within this particular group. </p> <p>Go to <code>Settings -&gt; Groups</code>. Clicking on the group name, e.g. \"Staff\", takes you to the permission page where you set what wagtail permissions staff should have. </p> <p>For example, system administrators could adjust the administrative access or permissions of every account or individual with the \"Staff\" user role.</p> <p>Hypha comes with the following user roles that has special permissions:</p> <ul> <li>User Roles vs. User Groups</li> <li>Staff</li> <li>Partner</li> <li>Reviewer</li> <li>Applicant</li> <li>Additional Roles</li> </ul>"},{"location":"references/user-roles/#staff","title":"Staff","text":"<p>The Staff role could submit reviews, send determinations, and set up applications (this means creating Forms, Funds, and Rounds, and give other users (e.g. Reviewers or other Staff) access to applications/submissions.</p> <p>Staff can:</p> <ul> <li>Create accounts for other Staff, Reviewers, and Applicants</li> <li>Deactivate other user accounts</li> <li>Modify roles for other users</li> <li>Set up applications (this means creating Forms, Funds, and Rounds</li> <li>View applications/submissions</li> <li>Give other users (ie Reviewers, Partners) access to submissions</li> <li>Review submissions</li> <li>Draft and send correspondence</li> <li>Write a comment to applicants and other users on the platform</li> </ul> <p>Account created by Staff &amp; assigned to either \"Fund\" or specific application(s)</p>"},{"location":"references/user-roles/#partner","title":"Partner","text":"<p>The Partner role could be access, edit, and communicate about a specific application they are assigned to. This role could be accessed when two or more people are working together on a single application; one applicant gets Applicant role, and additional applicants get this role. OTF use the partner role for fellowship host organizations, service providers, etc.</p> <p>A Partner can:</p> <ul> <li>View, edit, and communicate about a specific application</li> <li>Used when two or more people are working together on an application; one applicant gets Applicant role, and additional applicants get this role</li> </ul> <p>\u2139\ufe0f This role is created by Staff and associated with a specific application</p> <p>The Partner role could be access, edit, and communicate about a specific application they are assigned to. OTF use the partner role for fellowship host organizations, service providers, etc.</p> <p>The Partner could only review applications that has been assigned to them. Applications assigned to the Partner are available on their dashboard.</p> <p></p> <p>The Partner role could be associated or assigned to an application by clicking on Partner button in the Actions to take &gt; Assign.</p> <p></p>"},{"location":"references/user-roles/#reviewer","title":"Reviewer","text":"<p>The Reviewer role has their own dashboard and can submit reviews. OTF's Advisory Council Members are often assigned the 'Reviewer' role.</p> <p>Staff could create Reviewer accounts.</p> <p>A Reviewer can:</p> <ul> <li>The Staff role could also specify the Reviewer's role level of access and permissions on the platform.</li> <li>Staff could also assign reviewers to specific Funds and Labs, enabling individuals with the reviewer role access to a particular Fund or Lab.</li> <li>Reviewers could access and review application(s) they have been assigned</li> <li>Draft and submit Review Forms for application(s)</li> <li>A reviewer's communication could be visible to staff, applicants, and other reviewers, or only with staff. These settings are determined by the implementing organization.</li> </ul> <p></p>"},{"location":"references/user-roles/#applicant","title":"Applicant","text":"<p>The Applicant role can access their own application and communicate with OTF in the communication/comment tab.</p> <p>Any applicant could create their user account automatically when the applicant submits a submission.</p> <p>An Applicant can:</p> <ul> <li>Create, edit, and submit application(s)</li> <li>Contact staff regarding own application</li> <li>Track the status of their application(s) on their platform</li> </ul> <p></p>"},{"location":"references/user-roles/#additional-roles","title":"Additional Roles","text":"<p>New roles can be created and permissions (capabilities) for these roles can be set in Wagtail by the person deploying Hypha for your organization.</p> <p>For example, several of the following roles were created for different Hypha adopters:</p> <ul> <li>Community Reviewer</li> <li>Team Admin</li> <li>Finance</li> <li>Approver</li> </ul>"},{"location":"references/wagtail-admin/","title":"Wagtail admin","text":"<p>The WagTail Admin is your \"back office\" for setting up form applications and publishing Funds. This interface is also where you could set different levels of permissions and access for user roles or groups. You could use the admin menu (or explorer menu)to navigate through different sections of the WagTail Admin.</p> <p>What does it mean for a <code>Staff</code> role to have Wagtail Admin access?</p> <p>As a Wagtail Admin, you\u2019re able to oversee user accounts and manage the level of access for different users. The role is similar to being an architect of a fund or lab \u2014 you can create and maintain a fund or lab. Whether that be choosing a workflow structure, designing application forms, or managing user role permissions.</p> <p>From field guide: \u201cThe WagTail Admin is your \"back office\" for setting up form applications and publishing Funds. This interface is also where you could set different levels of permissions and access for user roles or groups.\u201c</p>"},{"location":"references/wagtail-admin/#admin-menu","title":"Admin menu","text":""},{"location":"references/wagtail-admin/#hypha-custom","title":"Hypha custom","text":"<ul> <li>Apply</li> <li>Rounds: Create rounds</li> <li>Sealed Rounds</li> <li>Funds: Create fund</li> <li>Labs: Create lab </li> <li>Request for Partners: RFP application</li> <li>Application Forms</li> <li>Review Forms</li> <li>Determination Forms</li> <li>Category Questions: Application questions with multiple options for users to select.</li> <li>Screening Statuses: For metadata related to the initial screening stage. </li> <li>Reviewer Roles: Adding reviewer roles.</li> <li>Meta Terms: For metadata, such as tags, thumbnail image and ... \u201cand\u201d - The results must match all terms (default for database search).</li> <li>Manage</li> </ul>"},{"location":"references/wagtail-admin/#wagtail-default-settings","title":"Wagtail default settings","text":"<ul> <li>Search: Wagtail provides a comprehensive and extensible search interface. In addition, it provides ways to promote search results through \u201cEditor\u2019s Picks\u201d. Wagtail also collects simple statistics on queries made through the search interface.</li> <li>Reports: Reports are views with listings of pages matching a specific query. They can also export these listings in spreadsheet format. They are found in the Reports submenu</li> <li>Locked Pages</li> <li>Workflows</li> <li>Workflow tasks</li> <li>Site history: Generates a report of user action logs.</li> <li>Aging page</li> <li>Public Site</li> <li>Investments</li> <li>Images</li> <li>Documents: Store documents like reports for blog posts </li> <li>Snippets: Snippets allow you to create elements on a website once and reuse them in multiple places. Then, if you want to change something on the snippet, you only need to change it once, and it will change across all the occurrences of the snippet. How snippets are used can vary widely between websites. </li> <li>Taxonomies</li> </ul>"},{"location":"references/wagtail-admin/#settings","title":"Settings","text":""},{"location":"references/wagtail-admin/#hypha-custom_1","title":"Hypha custom","text":"<ul> <li>Cookie consent settings: Cookie consent settings allow us to store your settings and preferences</li> <li>User settings: Users could add a consent checkbox on login form and include extra text on login form</li> <li>Vendor form settings</li> <li>Project settings: Creating forms in Projects</li> <li>Determination messages: Pre-populated text</li> <li>Determination settings: Creating determination forms</li> <li>Reviewer settings: Manage submissions reviewers should have access to</li> <li>Application settings: Extra text on application landing page</li> </ul>"},{"location":"references/wagtail-admin/#wagtail-default-settings_1","title":"Wagtail default settings","text":"<ul> <li>Workflows: Workflow states represent the status of a started workflow on a page</li> <li>Workflow tasks: Represents the ordering of a task in a specific workflow.</li> <li>Users: Adding, modifying, or removing user profiles. </li> <li>Groups: Create user groups with a specific set of permissions</li> <li>Sites: Managing the list of sites served by this Wagtail instance. Define settings that are editable by administrators in the Wagtail admin. These settings can be accessed in code, as well as in templates.</li> <li>Collections: Access to specific sets of images and documents can be controlled by setting up \u2018collections\u2019. By default all images and documents belong to the \u2018root\u2019 collection, but users with appropriate permissions can create new collections through the Settings -&gt; Collections area of the admin interface.</li> <li>Redirects: When dealing with publishing and unpublishing pages you will eventually need to make redirects. A redirect ensures that when a page is no longer available (404), the visitor and search engines are sent to a new page. Therefore the visitor won\u2019t end up in a breaking journey which would result in a page not found.</li> </ul>"},{"location":"references/workflows/","title":"Workflows","text":"<p>A workflow describes the process from a submitted application, through various stages of review, to acceptance of an application.</p> <p>\u2139\ufe0f Hypha covers more than just the application phase, but workflows are used in the application process only.</p>"},{"location":"references/workflows/#what-are-the-4-workflows","title":"What are the 4 workflows?","text":"<ol> <li>Request</li> <li>Request with external review</li> <li>Request with community review</li> <li>Concept and proposal</li> </ol> <p>All workflows begin with applicant drafting, revising and submitting an application (<code>DRAFT_STATE</code>) \u2014 only transition available is to <code>INITIAL_STATE</code>, upon applicant taking the action to submit their application/request.</p>"},{"location":"references/workflows/#request","title":"Request","text":"<p>The request workflow is a single stage process with no advisory council review.</p> <p>Proposal Persona: Funding organization offers a rapid response fund or another type of grantmaking that requires a streamline process that does not require an external review process. This application process could also be used for in-kind services like coaching, security audits, etc.</p> <p></p> <p>Once an application is submitted (<code>INITIAL_STATE</code>) \u2014 it can transition into the following:</p> <ul> <li>A request for more information (<code>more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the screeners.</li> <li>Open review (<code>internal_review</code>) \u2014 can transition only between closing review period (<code>post_review_discussion</code>) and reverting back to the internal screening phase.</li> <li><code>post_review_discussion</code> \u2014 after review is closed, you can request more information (<code>post_review_more_info</code>), ready for determination (<code>determination</code>), revert back to opening the review (<code>internal_review</code>), accept but additional info is needed (<code>almost</code>), accept (<code>accepted</code>) or reject (<code>rejected</code>)</li> <li><code>post_review_more_info</code> \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers.</li> <li>Ready for determination (<code>determination</code>) \u2014 can revert back to discussion (\u201cReady For Discussion (revert)\u201d \u2014 <code>post_review_discussion</code>) , or accept with additional info needed (<code>almost</code>), accept (<code>accepted</code>) or reject (<code>rejected</code>)</li> <li>Accepted, but additional info is needed (<code>almost</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers, admin, or staff positions.</li> <li>Accepted (<code>accepted</code>) \u2014 application accepted. Staff can still edit this submission.</li> <li>Rejected (<code>rejected</code>) \u2014 application rejected. Permissions removed from all roles.</li> </ul>"},{"location":"references/workflows/#request-with-external-review","title":"Request with external review","text":"<p>This workflow is a single stage process with an advisory council review or external review stage -- includes functionalties for external reviewers like advisory board members to access applications and submit reviews.</p> <p>Proposal Persona: This funding organization relies on external partners for evaluations. Proposals submitted to this workflow are reviewed by staff members and an advisory board that is made up of trusted community members.</p> <p></p> <p>Once an application is submitted (<code>INITIAL_STATE</code>) \u2014 it can transition into the following:</p> <ul> <li>A request for more information (<code>ext_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the screeners.</li> <li>Open review (<code>ext_internal_review</code>) \u2014 can transition only between closing review period (<code>ext_post_review_discussion</code>) and reverting back to the internal screening phase.</li> <li><code>ext_post_review_discussion</code> \u2014 after review is closed, you can request more information (<code>ext_post_review_more_info</code>), open the external review(<code>ext_external_review</code>), ready for determination (<code>ext_determination</code>), revert back to opening the review (<code>ext_internal_review</code>), or reject (<code>ext_rejected</code>)</li> <li><code>ext_post_review_more_info</code> \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the screeners.</li> <li>External review (<code>ext_external_review</code>) \u2014 can only transition between closing the review (<code>ext_post_external_review_discussion</code>) and reverting back to discussion (<code>ext_post_review_discussion</code>)</li> <li><code>ext_post_external_review_discussion</code> \u2014 can transition to a request more information (<code>ext_post_external_review_more_info</code>), ready for determination (<code>ext_determination</code>), revert back to opening the external review (<code>ext_external_review</code>), accept but additional info is needed (<code>ext_almost</code>), accept (<code>ext_accepted</code>) or reject (<code>ext_rejected</code>)</li> <li><code>ext_post_external_review_more_info</code> \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers.</li> <li>Ready for determination (<code>ext_determination</code>) \u2014 can revert back to discussion (\u201cReady For Discussion (revert)\u201d \u2014 <code>ext_post_external_review_discussion</code>) , or accept with additional info needed (<code>ext_almost</code>), accept (<code>ext_accepted</code>) or reject (<code>ext_rejected</code>)</li> <li>Accepted, but additional info is needed (<code>ext_almost</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers, admin, or staff positions.</li> <li>Accepted (<code>ext_accepted</code>) \u2014 application accepted. Staff can still edit this submission.</li> <li>Rejected (<code>ext_rejected</code>) \u2014 application rejected. Permissions removed from all roles.</li> </ul>"},{"location":"references/workflows/#request-with-community-review","title":"Request with community review","text":"<p>This workflow is a single stage process with an advisory council review or external review stage.</p> <p>Proposal Persona: This funding organization works with the community to co-design a meaningful definition of success. Applications are reviewed by staff members and an advisory board that is made up of trusted community members.</p> <p></p> <p>Once an application is submitted (<code>INITIAL_STATE</code>) \u2014 it can transition into the following:</p> <ul> <li>A request for more information (<code>com_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the screeners.</li> <li>Open call (public) (<code>com_open_call</code>) \u2014 from here- the only two transitions available are to either revert back to screening or to reject the application (<code>com_rejected</code>)</li> <li>Open Review (<code>com_internal_review</code>) \u2014 can transition to open community review (<code>com_community_review</code>), close review (<code>com_post_review_discussion</code>), revert to initial state / screening period, or reject application (<code>com_rejected</code>)</li> <li>Open Community Review \u2014 can transition to close review (<code>com_post_review_discussion</code>), revert back to opening internal review (<code>com_internal_review</code>), or rejecting application (<code>com_rejected</code>)</li> <li>Closed review (<code>com_post_review_discussion</code>) \u2014 can transition to a request for more information (<code>com_post_review_more_info</code>), open external review (<code>com_external_review</code>), mark application as ready for determination (<code>com_determination</code>), revert back to internal review (<code>com_internal_review</code>), or reject application (<code>com_rejected</code>)</li> <li>Request more information (<code>com_post_review_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers</li> <li>Open external review (<code>com_external_review</code>) \u2014 can transition to closing review (<code>com_post_external_review_discussion</code>) or revert back to discussion (<code>com_post_review_discussion</code>)</li> <li>Closed review (<code>com_post_external_review_discussion</code>) \u2014 can transition into a request for more information (<code>com_post_external_review_more_info</code>), mark application as ready for determination (<code>com_determination</code>), revert back to external review (<code>com_external_review</code>), mark application as accepted but additional information is required (<code>com_almost</code>), accept application (<code>com_accepted</code>), or reject application (<code>com_rejected</code>)</li> <li>Request more information (<code>com_post_external_review_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the external reviewers</li> <li>Mark application as ready for determination (<code>com_determination</code>) \u2014 can transition to revert back to marking application as ready for discussion (<code>com_post_external_review_discussion</code>), mark application as accepted but additional information is required (<code>com_almost</code>), accept application (<code>com_accepted</code>), or reject application (<code>com_rejected</code>)</li> <li>Accept application (<code>com_accepted</code>)</li> <li>Accept application but additional information is required (<code>com_almost</code>) \u2014 can transition to accepting application (<code>com_accepted</code>) or revert back to ready for discussion (<code>com_post_external_review_discussion</code>)</li> <li>Reject application (<code>com_rejected</code>)</li> </ul>"},{"location":"references/workflows/#concept-and-proposal","title":"Concept and Proposal","text":"<p>This workflow is a two-stage process: the first stage is the request and the second stage includes an advisory council review or external review stage.</p> <p>Proposal Persona: This application process is continually informed by feedback from grantee partners and community members. Applicants could use the workflow to follow the trajectory of the submission process as this workflow is transparent from the concept note (first stage) all the way to the proposal (second stage) with prospective and current applicants about funding priorities and decisions. The proposal stage has functionalities for applications to be reviewed by staff members and an advisory board that is made up of trusted community members.</p> <p> </p> <p>Once an application is submitted (<code>INITIAL_STATE</code>) \u2014 it can transition into the following:</p> <ul> <li>A request for more information (<code>concept_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the screeners</li> <li>Reject concept note (<code>concept_rejected</code>)</li> <li>Open Review (<code>concept_internal_review</code>) \u2014 can transition into closing the review (<code>concept_review_discussion</code>), revert back to screening (initial state), or invite applicant to proposal (<code>invited_to_proposal</code>)</li> <li>Closed review (<code>concept_review_discussion</code>) \u2014 can transition to a request for more information (<code>concept_review_more_info</code>), mark application as ready for preliminary determination (<code>concept_determination</code>), revert back to open review (<code>concept_internal_review</code>), invite applicant to submit a proposal (<code>invited_to_proposal</code>), or reject application (<code>concept_rejected</code>)</li> <li>Request for more information (<code>concept_review_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers</li> <li>Mark application as ready for preliminary determination (<code>concept_determination</code>) \u2014 can transition to revert to discussion (<code>concept_review_discussion</code>), invite applicant to submit proposal (<code>invited_to_proposal</code>), or reject application (<code>concept_rejected</code>)</li> <li>Invite applicant to proposal (invited_to_proposal<code>) \u2014 accepts the concept and can transition into</code>draft_proposal`</li> <li>Applicant drafts proposal (<code>draft_proposal</code>) \u2014 can transition into (<code>proposal_discussion</code>), open external review (<code>external_review</code>), mark application as ready for final determination (<code>proposal_determination</code>), or reject proposal (<code>proposal_rejected</code>)</li> <li>Proposal discussion (<code>proposal_discussion</code>) \u2014 can transition into a request for more info (<code>proposal_more_info</code>), open internal review (<code>proposal_internal_review</code>), open external review (<code>proposal_external_review</code>), mark application as ready for final determination (<code>proposal_determination</code>) or reject application (<code>proposal_rejected</code>)</li> <li>Request for more info (<code>proposal_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the reviewers</li> <li>Internal review (<code>proposal_internal_review</code>) \u2014 can transition into closing review (<code>post_proposal_review_discussion</code>), or revert back to \u201cProposal Received\u201d <code>proposal_discussion</code></li> <li>Closed internal review (<code>post_proposal_review_discussion</code>) \u2014 can transition to a request for more info (<code>post_proposal_review_more_info</code>), open external review (<code>external_review</code>), mark application as ready for final determination (<code>proposal_determination</code>), revert back to opening internal review (<code>proposal_internal_review</code>), or reject proposal (<code>proposal_rejected</code>)</li> <li>Request for more info (<code>post_proposal_review_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the internal reviewers</li> <li>External review (<code>external_review</code>) \u2014 can transition to closing review (<code>post_external_review_discussion</code>) or revert back to discussion (<code>post_proposal_review_discussion</code>)</li> <li>Closed external review (<code>post_external_review_discussion</code>) \u2014 can transition to a request for more info (<code>post+external_review_more_info</code>), mark application as ready for final determination (<code>proposal_determination</code>), revert back to opening external review (<code>external_review</code>), accept proposal but require additional information (<code>proposal_almost</code>), accept proposal (<code>proposal_accepted</code>), reject proposal (<code>proposal_rejected</code>)</li> <li>Request more information (<code>post_external_review_more_info</code>) \u2014 opens editing permissions to applicant again to revise their application to provide the information requested by the external reviewers</li> <li>Proposal determination (<code>proposal_determination</code>) \u2014 can transition to revert back to discussion (<code>post_external_review_discussion</code>), accept proposal but require additional info (<code>proposal_almost</code>), accept proposal (<code>proposal_accepted</code>) , or reject proposal (<code>proposal_rejected</code>)</li> <li>Proposal accepted (<code>proposal_accepted</code>)</li> <li>Proposal accepted but additional info required (<code>proposal_almost</code>)</li> <li>Proposal rejected (<code>proposal_rejected</code>)</li> </ul>"},{"location":"references/workflows/#select-a-workflow","title":"Select a Workflow","text":"<p>The Workflow defines the stages and processes that the application should undertake with OTF. Creating a new Fund or Lab requires you to select one of these workflows.</p> <p>Each workflow has a predetermined amount of stages (e.g. request, proposal), application forms, review forms, and determination forms associated with this Fund or Lab.</p> <p>Each workflow offers different statuses (e.g. External Review, Ready for Determination), and different actions (e.g Invite to proposal).</p> <p>The four hard-coded workflows are: Request, Request with external review, Request with community review, Concept &amp; Proposal.</p>"},{"location":"references/workflows/#request_1","title":"\ud83d\udc81 Request","text":"<p>This application process requires less time and effort than the other workflow processes. This workflow has only a single stage with no external review. </p> <p>Proposal Persona Funding organization offers a rapid response fund or another type of grantmaking that requires a streamline process that does not require an external review process. This application process could also be used for in-kind services like coaching, security audits, etc. </p> <p></p>"},{"location":"references/workflows/#request-with-external-reviewer","title":"\ud83d\udc73 Request with External Reviewer","text":"<p>The Request - External Reviewer workflow is a single stage application process with functionalties for external reviewers like advisory board members to access applications and submit reviews.</p> <p>Proposal Persona This funding organization relies on external partners for evaluations. Proposals submitted to this workflow are reviewed by staff members and an advisory board that is made up of trusted community members. </p> <p></p>"},{"location":"references/workflows/#request-with-community-review_1","title":"\ud83d\udc6a Request with Community Review","text":"<p>The Request with Community Review workflow is a single stage application process with functionalties for external reviewers, including applicants to carry out peer review of each other applications.</p> <p>Proposal Persona This funding organization works with the community to co-design a meaningful definition of success. Applications are reviewed by staff members and an advisory board that is made up of trusted community members.</p> <p></p>"},{"location":"references/workflows/#concept-and-proposal_1","title":"\ud83d\udca1Concept and Proposal","text":"<p>Proposal Persona Applicants could use this workflow to follow the trajectory of the submission process as this workflow is transparent from the concept note (first stage) all the way to the proposal (second stage) with prospective and current applicants about funding priorities and decisions. The proposal stage has functionalities for applications to be reviewed by staff members and an advisory board that is made up of trusted community members.</p> <p>Stage 1</p> <p></p> <p>Stage 2</p> <p></p>"},{"location":"setup/setup-notifications/","title":"Setup notifications","text":"<p>Hypha supports sending notifications for different types of activities on Hypha and reminders via Email and Slack.</p>"},{"location":"setup/setup-notifications/#email","title":"Email","text":"<p>Make sure Django is configured to send emails.</p>"},{"location":"setup/setup-notifications/#slack","title":"Slack","text":""},{"location":"setup/administrators/configuration/","title":"Configuration","text":"<p>Under hypha/settings/ there are several python configuration files:</p> <p>We highly recommend using environment variables since it is more secure. It is also possible to add values to settings in a <code>local.py</code> files, see below.</p> <ul> <li>base.py \u2013 Base settings file. Other settings file start by loading this in.</li> <li>django-py - Django settings, loaded by base.py. Separated out to make base.py more manageable.</li> <li>dev.py \u2013 This is settings for development work.</li> <li>example.py \u2013 Example settings, not loaded anywhere. (This file should be expanded to cover more settings.)</li> <li>local.py.example \u2013 Copy and rename to \"local.py\" and it will be loaded by both production and dev settings. Main use is to allow developers an easy way to set and test settings. Can also be used in production but environment variables are the preferred and more secure way.</li> <li>production.py \u2013 This is settings for production use.</li> <li>test.py \u2013 This is the settings file for running tests.</li> </ul>"},{"location":"setup/administrators/configuration/#project-settings","title":"Project settings.","text":""},{"location":"setup/administrators/configuration/#secret_key-is-required","title":"SECRET_KEY is required","text":"<pre><code>SECRET_KEY = env.str('SECRET_KEY', None)\n</code></pre>"},{"location":"setup/administrators/configuration/#allowed_hosts-is-required","title":"ALLOWED_HOSTS is required","text":"<pre><code>ALLOWED_HOSTS = env.list('ALLOWED_HOSTS', [])\n</code></pre>"},{"location":"setup/administrators/configuration/#database","title":"Database","text":"<p>See https://docs.djangoproject.com/en/stable/ref/settings/#databases</p> <p>We use <code>dj-database-url</code> so also see https://github.com/jazzband/dj-database-url</p> <p>Be default Hypha looks for a database with the name \"hypha\". Set <code>APP_NAME</code> to change the database name.</p> <pre><code>APP_NAME = env.str('APP_NAME', 'hypha')\nDATABASES = {\n    'default': dj_database_url.config(\n        conn_max_age=600,\n        default=f'postgres:///{APP_NAME}'\n    )\n}\n</code></pre>"},{"location":"setup/administrators/configuration/#language-code-in-standard-language-id-format-en-en-gb-en-us","title":"Language code in standard language id format: en, en-gb, en-us","text":"<p>The corrosponding locale dir is named: en, en_GB, en_US</p> <pre><code>LANGUAGE_CODE = env.str('LANGUAGE_CODE', 'en')\n</code></pre>"},{"location":"setup/administrators/configuration/#number-of-seconds-that-password-reset-and-account-activation-links-are-valid-default-259200-3-days","title":"Number of seconds that password reset and account activation links are valid (default 259200, 3 days).","text":"<pre><code>PASSWORD_RESET_TIMEOUT = env.int('PASSWORD_RESET_TIMEOUT', 259200)\n</code></pre>"},{"location":"setup/administrators/configuration/#seconds-to-enter-password-on-password-page-while-email-change2fa-change-default-120","title":"Seconds to enter password on password page while email change/2FA change (default 120).","text":"<pre><code>PASSWORD_PAGE_TIMEOUT = env.int('PASSWORD_PAGE_TIMEOUT', 120)\n</code></pre>"},{"location":"setup/administrators/configuration/#the-age-of-session-cookies-in-seconds","title":"The age of session cookies, in seconds.","text":"<p>This determines the length of time for which the user will remain logged in. The default value is 2 weeks.</p> <pre><code>SESSION_COOKIE_AGE = env.int('SESSION_COOKIE_AGE', 60 * 60 * 24 * 7 * 2)\n</code></pre>"},{"location":"setup/administrators/configuration/#hypha-custom-settings","title":"Hypha custom settings","text":""},{"location":"setup/administrators/configuration/#set-the-currency-symbol-to-be-used","title":"Set the currency symbol to be used.","text":"<pre><code>CURRENCY_SYMBOL = env.str('CURRENCY_SYMBOL', '$')\n</code></pre>"},{"location":"setup/administrators/configuration/#default-page-pagination-value","title":"Default page pagination value.","text":"<pre><code>DEFAULT_PER_PAGE = 20\n</code></pre>"},{"location":"setup/administrators/configuration/#if-hypha-should-enforce-2fa-for-all-users","title":"If Hypha should enforce 2FA for all users.","text":"<pre><code>ENFORCE_TWO_FACTOR = env.bool('ENFORCE_TWO_FACTOR', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#if-users-should-be-able-to-register-accounts-without-first-creating-applications","title":"If users should be able to register accounts without first creating applications","text":"<pre><code>ENABLE_REGISTRATION_WITHOUT_APPLICATION = env.bool('ENABLE_REGISTRATION_WITHOUT_APPLICATION', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#if-users-are-forced-to-log-in-before-creating-applications","title":"If users are forced to log in before creating applications","text":"<pre><code>FORCE_LOGIN_FOR_APPLICATION = env.bool('FORCE_LOGIN_FOR_APPLICATION', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#set-the-allowed-file-extension-for-all-uploads-fields","title":"Set the allowed file extension for all uploads fields.","text":"<pre><code>FILE_ALLOWED_EXTENSIONS = ['doc', 'docx', 'odp', 'ods', 'odt', 'pdf', 'ppt', 'pptx', 'rtf', 'txt', 'xls', 'xlsx']\nFILE_ACCEPT_ATTR_VALUE = ', '.join(['.' + ext for ext in FILE_ALLOWED_EXTENSIONS])\n</code></pre>"},{"location":"setup/administrators/configuration/#give-staff-lead-permissions","title":"Give staff lead permissions.","text":"<p>Only effects setting external reviewers for now.</p> <pre><code>GIVE_STAFF_LEAD_PERMS = env.bool('GIVE_STAFF_LEAD_PERMS', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#enable-staff-to-hijack-become-other-users","title":"Enable staff to \"hijack\" (become) other users.","text":"<p>Good for testing, might not be a good idea in production.</p> <pre><code>HIJACK_ENABLE = env.bool('HIJACK_ENABLE', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#organisation-name-and-e-mail-address-etc-used-in-e-mail-templates-etc","title":"Organisation name and e-mail address etc., used in e-mail templates etc.","text":"<pre><code>ORG_EMAIL = env.str('ORG_EMAIL', 'info@example.org')\nORG_GUIDE_URL = env.str('ORG_GUIDE_URL', 'https://guide.example.org/')\nORG_LONG_NAME = env.str('ORG_LONG_NAME', 'Acme Corporation')\nORG_SHORT_NAME = env.str('ORG_SHORT_NAME', 'ACME')\nORG_URL = env.str('ORG_URL', 'https://www.example.org/')\n</code></pre>"},{"location":"setup/administrators/configuration/#enable-projects-in-hypha-contracts-and-invoicing-that-comes-after-a-submission-is-approved","title":"Enable Projects in Hypha. Contracts and invoicing that comes after a submission is approved.","text":"<pre><code>PROJECTS_ENABLED = env.bool('PROJECTS_ENABLED', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#auto-create-projects-for-approved-applications","title":"Auto create projects for approved applications.","text":"<pre><code>PROJECTS_AUTO_CREATE = env.bool('PROJECTS_AUTO_CREATE', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#send-out-e-mail-slack-messages-etc-from-hypha-set-to-true-for-production","title":"Send out e-mail, slack messages etc. from Hypha. Set to true for production.","text":"<pre><code>SEND_MESSAGES = env.bool('SEND_MESSAGES', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#if-automatic-e-mails-should-be-sent-out-to-reviewers-when-submissions-are-ready-for-review","title":"If automatic e-mails should be sent out to reviewers when submissions are ready for review.","text":"<pre><code>SEND_READY_FOR_REVIEW = env.bool('SEND_READY_FOR_REVIEW', True)\n</code></pre>"},{"location":"setup/administrators/configuration/#slack-settings","title":"Slack settings.","text":"<pre><code>SLACK_TOKEN = env.str('SLACK_TOKEN', None)\nSLACK_USERNAME = env.str('SLACK_USERNAME', 'Hypha')\nSLACK_DESTINATION_ROOM = env.str('SLACK_DESTINATION_ROOM', None)\nSLACK_DESTINATION_ROOM_COMMENTS = env.str('SLACK_DESTINATION_ROOM_COMMENTS', None)\nSLACK_TYPE_COMMENTS = env.list('SLACK_TYPE_COMMENTS', [])\nSLACK_ENDPOINT_URL = env.str('SLACK_ENDPOINT_URL', 'https://slack.com/api/chat.postMessage')\nSLACK_BACKEND = 'django_slack.backends.CeleryBackend'  # UrllibBackend can be used for sync\n</code></pre>"},{"location":"setup/administrators/configuration/#staff-e-mail-domain-used-for-oauth2-whitelist-default-value-and-staff-account-creation","title":"Staff e-mail domain. Used for OAUTH2 whitelist default value and staff account creation.","text":"<pre><code>STAFF_EMAIL_DOMAINS = env.list('STAFF_EMAIL_DOMAINS', [])\n</code></pre>"},{"location":"setup/administrators/configuration/#should-staff-be-able-to-accesssee-draft-submissions","title":"Should staff be able to access/see draft submissions.","text":"<pre><code>SUBMISSIONS_DRAFT_ACCESS_STAFF = env.bool('SUBMISSIONS_DRAFT_ACCESS_STAFF', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#should-staff-admins-be-able-to-accesssee-draft-submissions","title":"Should staff admins be able to access/see draft submissions.","text":"<pre><code>SUBMISSIONS_DRAFT_ACCESS_STAFF_ADMIN = env.bool('SUBMISSIONS_DRAFT_ACCESS_STAFF_ADMIN', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#should-staff-be-able-to-export-submissions","title":"Should staff be able to export submissions.","text":"<pre><code>SUBMISSIONS_EXPORT_ACCESS_STAFF = env.bool('SUBMISSIONS_EXPORT_ACCESS_STAFF', True)\n</code></pre>"},{"location":"setup/administrators/configuration/#should-staff-admins-be-able-to-export-submissions","title":"Should staff admins be able to export submissions.","text":"<pre><code>SUBMISSIONS_EXPORT_ACCESS_STAFF_ADMIN = env.bool('SUBMISSIONS_EXPORT_ACCESS_STAFF_ADMIN', True)\n</code></pre>"},{"location":"setup/administrators/configuration/#columns-to-exclude-from-the-submission-tables","title":"Columns to exclude from the submission tables.","text":"<p>Possible values are: fund, round, status, lead, reviewers, screening_statuses, category_options, meta_terms, organization_name</p> <pre><code>SUBMISSIONS_TABLE_EXCLUDED_FIELDS = env.list('SUBMISSIONS_TABLE_EXCLUDED_FIELDS', [])\n</code></pre>"},{"location":"setup/administrators/configuration/#should-submission-automatically-transition-after-all-reviewer-roles-are-assigned","title":"Should submission automatically transition after all reviewer roles are assigned.","text":"<pre><code>TRANSITION_AFTER_ASSIGNED = env.bool('TRANSITION_AFTER_ASSIGNED', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#should-submission-automatically-transition-after-n-number-of-reviews","title":"Should submission automatically transition after n number of reviews.","text":"<p>Possible values are: False, 1,2,3,\u2026</p> <pre><code>TRANSITION_AFTER_REVIEWS = env.bool('TRANSITION_AFTER_REVIEWS', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#on-heroku-set-to-true-if-deploying-to-heroku","title":"On Heroku, set to true if deploying to Heroku.","text":"<pre><code>env.bool('ON_HEROKU', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#secure-cookies","title":"Secure cookies","text":"<p>Set this to enable Djangos settings for secure cookies.</p> <pre><code>COOKIE_SECURE = env.bool('COOKIE_SECURE', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#e-mail-settings","title":"E-mail settings","text":""},{"location":"setup/administrators/configuration/#from-e-mail-address","title":"From e-mail address","text":"<pre><code>SERVER_EMAIL = DEFAULT_FROM_EMAIL = env.str('SERVER_EMAIL', None)\n</code></pre>"},{"location":"setup/administrators/configuration/#e-mail-subject-prefix","title":"E-mail subject prefix","text":"<pre><code>EMAIL_SUBJECT_PREFIX = env.str('EMAIL_SUBJECT_PREFIX', None)\n</code></pre>"},{"location":"setup/administrators/configuration/#anymail","title":"Anymail","text":"<p>Hypha uses the Anymail packaged so a number of mail backends are supported. Mailgun settings are present in the production file by default.</p> <p>Read more about Anymail: https://anymail.dev/en/stable/</p> <pre><code>MAILGUN_API_KEY = env.str('MAILGUN_API_KEY')\nMAILGUN_SENDER_DOMAIN = env.str('EMAIL_HOST', None)\nMAILGUN_API_URL = env.str('MAILGUN_API_URL', 'https://api.mailgun.net/v3')\nWEBHOOK_SECRET = env.str('ANYMAIL_WEBHOOK_SECRET', None)\n</code></pre>"},{"location":"setup/administrators/configuration/#local-e-mail-server","title":"Local e-mail server","text":"<p>It is also possible to use a local e-mail server.</p> <pre><code>EMAIL_HOST = env.str('EMAIL_HOST', None)\nEMAIL_PORT = env.int('EMAIL_PORT', None)\nEMAIL_HOST_USER = env.str('EMAIL_HOST_USER', None)\nEMAIL_HOST_PASSWORD = env.str('EMAIL_HOST_PASSWORD', None)\nEMAIL_USE_TLS = env.bool('EMAIL_USE_TLS', False)\nEMAIL_USE_SSL = env.bool('EMAIL_USE_SSL', False)\n</code></pre>"},{"location":"setup/administrators/configuration/#sentry","title":"Sentry","text":"<p>Track errors from your Hypha installation.</p> <pre><code>SENTRY_DSN = env.str('SENTRY_DSN', None)\nSENTRY_PUBLIC_KEY = env.str('SENTRY_PUBLIC_KEY', None)\nSENTRY_TRACES_SAMPLE_RATE = env.float('SENTRY_TRACES_SAMPLE_RATE', default=0)\nSENTRY_ENVIRONMENT = env.str('SENTRY_ENVIRONMENT', 'unknown')\nSENTRY_DEBUG = env.bool('SENTRY_DEBUG', False)\nSENTRY_DENY_URLS = env.list('SENTRY_DENY_URLS', default=[])\n</code></pre> <p>See setup guide for sentry.</p>"},{"location":"setup/administrators/configuration/#s3-settings","title":"S3 settings","text":"<pre><code>AWS_ACCESS_KEY_ID = env.str('AWS_ACCESS_KEY_ID', None)\nAWS_SECRET_ACCESS_KEY = env.str('AWS_SECRET_ACCESS_KEY', None)\nAWS_STORAGE_BUCKET_NAME = env.str('AWS_STORAGE_BUCKET_NAME', None)\nAWS_PRIVATE_CUSTOM_DOMAIN = env.str('AWS_PRIVATE_CUSTOM_DOMAIN', None)\nAWS_QUERYSTRING_EXPIRE = env.str('AWS_QUERYSTRING_EXPIRE', None)\n</code></pre>"},{"location":"setup/administrators/configuration/#basic-auth-settings","title":"Basic auth settings","text":"<p>It is possible to set Hypha behind basic authentication with IP whitelisting support. Good for test sites etc.</p> <p>See https://github.com/tm-kn/django-basic-auth-ip-whitelist</p> <pre><code>BASIC_AUTH_LOGIN = env.str('BASIC_AUTH_LOGIN', None)\nBASIC_AUTH_PASSWORD = env.str('BASIC_AUTH_PASSWORD', None)\nBASIC_AUTH_WHITELISTED_HTTP_HOSTS = env.list('BASIC_AUTH_WHITELISTED_HTTP_HOSTS', [])\nBASIC_AUTH_WHITELISTED_IP_NETWORKS = env.list('BASIC_AUTH_WHITELISTED_IP_NETWORKS', [])\n</code></pre>"},{"location":"setup/administrators/configuration/#django-elevate-settings","title":"Django Elevate settings","text":"<p>How this works? </p> <p>How long should Elevate mode be active for?</p> <pre><code>ELEVATE_COOKIE_AGE = env.int(\"ELEVATE_COOKIE_AGE\", 3600)  # 1 hours\n</code></pre>"},{"location":"setup/administrators/configuration/#an-extra-salt-to-be-added-into-the-cookie-signature","title":"An extra salt to be added into the cookie signature.","text":"<pre><code>ELEVATE_COOKIE_SALT = env.str(\"ELEVATE_COOKIE_SALT\", SECRET_KEY)\n</code></pre>"},{"location":"setup/administrators/overriding-templates/","title":"Overriding templates","text":""},{"location":"setup/administrators/overriding-templates/#templates","title":"Templates","text":"<p>You can override any Hypha template by adding a copy inside the <code>templates_custom</code> directory.</p> <p>As an example lets override the <code>hypha/apply/dashboard/templates/dashboard/applicant_dashboard.html</code> template.</p> <p>Place a copy of the template in <code>hypha/templates_custom/dashboard/applicant_dashboard.html</code>. Make any needed changes to the template and it will be used instead of the original template.</p>"},{"location":"setup/administrators/setup-email/","title":"Setup email","text":""},{"location":"setup/administrators/setup-email/#e-mail-settings","title":"E-mail settings","text":""},{"location":"setup/administrators/setup-email/#from-e-mail-address","title":"From e-mail address","text":"<pre><code>SERVER_EMAIL = DEFAULT_FROM_EMAIL = env.str('SERVER_EMAIL', None)\n</code></pre>"},{"location":"setup/administrators/setup-email/#e-mail-subject-prefix","title":"E-mail subject prefix","text":"<pre><code>EMAIL_SUBJECT_PREFIX = env.str('EMAIL_SUBJECT_PREFIX', None)\n</code></pre>"},{"location":"setup/administrators/setup-email/#anymail","title":"Anymail","text":"<p>Hypha uses the Anymail packaged so a number of mail backends are supported. Mailgun settings are present in the production file by default.</p> <p>Read more about Anymail: https://anymail.dev/en/stable/</p> <pre><code>MAILGUN_API_KEY = env.str('MAILGUN_API_KEY')\nMAILGUN_SENDER_DOMAIN = env.str('EMAIL_HOST', None)\nMAILGUN_API_URL = env.str('MAILGUN_API_URL', 'https://api.mailgun.net/v3')\nWEBHOOK_SECRET = env.str('ANYMAIL_WEBHOOK_SECRET', None)\n</code></pre>"},{"location":"setup/administrators/setup-email/#local-e-mail-server","title":"Local e-mail server","text":"<p>It is also possible to use a local e-mail server.</p> <pre><code>EMAIL_HOST = env.str('EMAIL_HOST', None)\nEMAIL_PORT = env.int('EMAIL_PORT', None)\nEMAIL_HOST_USER = env.str('EMAIL_HOST_USER', None)\nEMAIL_HOST_PASSWORD = env.str('EMAIL_HOST_PASSWORD', None)\nEMAIL_USE_TLS = env.bool('EMAIL_USE_TLS', False)\nEMAIL_USE_SSL = env.bool('EMAIL_USE_SSL', False)\n</code></pre>"},{"location":"setup/administrators/setup-error-performance-monitoring/","title":"Setting up error &amp; performance monitoring","text":"<p>Hypha supports error tracking using https://sentry.io and comes pre-installed with <code>sentry-sdk</code>. Once enabled, you will be able to log unhandled exceptions and manually logged errors.</p>"},{"location":"setup/administrators/setup-error-performance-monitoring/#error-tracking","title":"Error Tracking","text":""},{"location":"setup/administrators/setup-error-performance-monitoring/#python-error-tracking","title":"Python Error Tracking","text":"<p>To enable Sentry to track python and Django Errors, set <code>SENTRY_DSN</code> environment variable.</p> <pre><code>SENTRY_DSN=\"https://....\"\n</code></pre>"},{"location":"setup/administrators/setup-error-performance-monitoring/#javascript-error-tracking","title":"Javascript Error Tracking","text":"<p>Add your sentry public key to <code>SENTRY_PUBLIC_KEY</code> environment variable. This will add lazy-loaded sdk from Sentry CDN to all the templates, and then initialize it.</p> <pre><code>SENTRY_PUBLIC_KEY=\"2214b....\"\n</code></pre> <p>You can set a comma separated <code>SENTRY_DENY_URLS</code> environment variable to exclude any page from being tracked. </p> <p>See more: https://docs.sentry.io/platforms/javascript/</p>"},{"location":"setup/administrators/setup-error-performance-monitoring/#performance-monitoring","title":"Performance monitoring","text":"<p>Set <code>SENTRY_TRACES_SAMPLE_RATE</code> to a value greater than <code>0</code> upto <code>1</code> to enable performance monitoring of both the Python and Javascript code. It requires that you have already set <code>SENTRY_DSN</code> and/or <code>SENTRY_PUBLIC_KEY</code>.</p> <pre><code>SENTRY_TRACES_SAMPLE_RATE = \"0.5\"\n</code></pre>"},{"location":"setup/administrators/setup-error-performance-monitoring/#sentry-environment","title":"Sentry Environment","text":"<p>You can also set deployment environment using <code>SENTRY_ENVIRONMENT</code>. This string is freeform and set to <code>production</code> by default. A release can be associated with more than one environment to separate them in the UI (think staging vs production or similar)</p> <pre><code>SENTRY_ENVIRONMENT=\"staging\"\n</code></pre>"},{"location":"setup/administrators/setup-error-performance-monitoring/#debugging","title":"Debugging","text":"<p>If debug is enabled SDK will attempt to print out useful debugging information if something goes wrong with sending the event. The default is always false. It's generally not recommended to turn it on in production, though turning debug mode on will not cause any safety concerns.</p> <pre><code>SENTRY_DEBUG=true\n</code></pre>"},{"location":"setup/administrators/setup-error-performance-monitoring/#advance-configuration","title":"Advance Configuration","text":"<p>Make use of <code>/hypha/settings/local.py</code> and override <code>hypha/tempalates/base.html</code> to add custom initialization code. </p> <p>See https://docs.sentry.io/platforms/python/guides/django/configuration/ for more details.</p>"},{"location":"setup/deployment/","title":"Deployment","text":""},{"location":"setup/deployment/#considering-hypha","title":"Considering Hypha?","text":"<p>If you are considering deploying Hypha, there are several ways to deploy it. It includes a Django web application python, and requires a PostgreSQL database server, and Nginx or Apache web server.</p>"},{"location":"setup/deployment/#stand-alone","title":"Stand Alone","text":"<p>This requires a Linux server (It has been tested with Ubuntu, but should work with any flavor).</p>"},{"location":"setup/deployment/#heroku","title":"Heroku","text":"<p>This is the primary way Hypha has been deployed so far. It is fairly straightforward and well-tested</p>"},{"location":"setup/deployment/#docker","title":"Docker","text":"<p>This deployment so far has been tested and used only for development purposes, but should theoretically work for production deployment.</p>"},{"location":"setup/deployment/docker/","title":"Docker","text":"<p>This is a set of instructions on spinning up hypha in a docker container for evaluation of the system. While Docker is a well suited to this type of quick exploration, we do not currently recommend these docker instructions for production use. Instead, we advise production deployments to instead install into a stand-alone directory.</p>"},{"location":"setup/deployment/docker/#requirements","title":"Requirements","text":"<p>Recent version of Docker.</p>"},{"location":"setup/deployment/docker/#domains","title":"Domains","text":"<p>You will need two domain to run this app. One for the public site and one for the apply site. Make sure your DNS points to the server running these containers.</p>"},{"location":"setup/deployment/docker/#get-the-code","title":"Get the code","text":"<pre><code>$ git clone https://github.com/HyphaApp/hypha.git hypha\n\n$ cd hypha\n</code></pre> <p>Everything from now on will happen inside the hypha directory.</p>"},{"location":"setup/deployment/docker/#docker_1","title":"Docker","text":""},{"location":"setup/deployment/docker/#modify-docker-and-nginx-files","title":"Modify Docker and Nginx Files","text":"<p>There are several files you will need to modify before you run docker-compose.</p> <ul> <li>docker-compose: </li> <li>change line <code>dockerfile: docker/Dockerfile.dev</code> to read <code>dockerfile: docker/Dockerfile.prod</code></li> <li>change ports in web section to '80:80'</li> <li>Dockerfile.prod: in Environment variables section: add your domain.</li> <li>Move <code>nginx/hypha.conf</code> to <code>nginx/hypha-dev.conf</code> and move <code>nginx/hypha-prod.conf</code> to <code>nginx/hypha.conf</code></li> </ul> <p>Build the Docker images</p> <p>Move to the \"docker\" directory.</p> <pre><code>$ cd docker\n</code></pre> <p>Run the docker compose command to build the images. This will take some time.</p> <p>If you need to rebuild the images to get a later version just run the \"build\" again.</p> <pre><code>$ docker-compose build\n</code></pre>"},{"location":"setup/deployment/docker/#start-the-docker-environment","title":"Start the docker environment","text":"<p>To start the docker containers you use the \"up\" command. This command you will use each time you want to start up and use this docker environment.</p> <pre><code>$ docker-compose up\n</code></pre>"},{"location":"setup/deployment/docker/#access-the-docker-environment","title":"Access the docker environment","text":"<p>Go to your domain - you should see the app deployed.</p>"},{"location":"setup/deployment/docker/#run-commands-in-the-docker-environment","title":"Run commands in  the docker environment","text":"<p>To get bash shell on the container that runs the Django app, use this command.</p> <pre><code>docker-compose exec py bash\n</code></pre> <p>Here you can issue django commands as normal. You might want to change the user - the default is circleci, but most of the code is owned by the user 'node'. To do that:</p> <p><code>docker-compose exec -u node py bash</code></p> <p>To get a shell on the container that runs Postgres, use this command.</p> <pre><code>docker-compose exec db bash\n</code></pre>"},{"location":"setup/deployment/docker/#stop-the-docker-environment","title":"Stop the docker environment.","text":"<p>Press Ctrl+C in the terminal window.</p>"},{"location":"setup/deployment/docker/#other-considerations","title":"Other considerations","text":""},{"location":"setup/deployment/docker/#setting-your-own-postgresql-password","title":"Setting your own PostgreSQL password","text":"<p>In the docker-compose.yml file, there is under db, an environment section with database name, user, and password. You can set those, then remember, in the Docker file, to use those in the DATABASE_URL environment variable.</p>"},{"location":"setup/deployment/docker/#ssl-certificates","title":"SSL certificates","text":"<p>This setup is port 80 only. To set up an SSL certificate, you'd have to:</p> <ul> <li>add port 443 to the nginx section of the docker-compose file</li> <li>add a volume to hold your certs</li> <li>add the certification info to the nginx configuration file</li> </ul>"},{"location":"setup/deployment/heroku/","title":"Heroku","text":""},{"location":"setup/deployment/heroku/#dns","title":"DNS","text":"<p>Set up two addresses per environment, one for the public site and one for the apply site.</p> <p>Add the addresses first to Heroku to get the the DNS target for the CNAME entry.</p> <p>OBS! If you are using Cloudflare ignore the DNS targets and use the Heroku application URL instead, something like <code>[dev-app-name].herokuapp.com</code>.</p> <p>Add redirects for <code>robots.txt</code> and <code>favicon.ico</code> to <code>/static/robots.txt</code> and <code>/static/favicon.ico</code>.</p>"},{"location":"setup/deployment/heroku/#heroku_1","title":"Heroku","text":"<p>Create a Heroku app for your project. A dev, test and live environment is good to have.</p> <p>Connect the Heroku app to your git repo or push your code directly to Heroku. If you are using GitHub I recommend selecting it as the \"deployment method\".</p> <p>Then so the following steps for each environment.</p> <ol> <li>Set these settings as a minimum:</li> <li>API_BASE_URL</li> <li>BASIC_AUTH_ENABLED</li> <li>BASIC_AUTH_LOGIN</li> <li>BASIC_AUTH_PASSWORD</li> <li>DJANGO_SETTINGS_MODULE</li> <li>EMAIL_HOST</li> <li>ON_HEROKU=true so correct production settings gets loaded</li> <li>ORG_LONG_NAME</li> <li>ORG_SHORT_NAME</li> <li>ORG_EMAIL</li> <li>SECRET_KEY</li> <li>SEND_MESSAGES</li> <li>SERVER_EMAIL</li> <li>STAFF_EMAIL_DOMAINS</li> </ol> <p>Generate secret key with:</p> <pre><code>python -c \"from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())\"\n</code></pre> <ol> <li>Add Heroku Postgres as a add-on. \"Hobby dev\" or \"Hobby basic\" works for dev and test and \"Standard 0\" is a good start for production.</li> <li>Add buildpacks for Nodejs and Python, make sure Nodejs is listed first.</li> <li>Temporarily remove the \"release\" step from the \"Procfile\". It has a clear cache step that will fail until the cache tables are created.</li> <li>Deploy the appropriate branch.</li> <li>Activate dynos to run your app. For dev and test the \"Hobby\" level works well. For production a \"Standard-2X\" with a dyno count of 2 and WEB_CONCURRENCY set to 3 performance well.</li> <li>Run the following commands from the command line with the help of heroku-cli. If it's the first time you use heroku-cli you first need to login with <code>heroku login</code>.</li> </ol> <pre><code>$ heroku run python manage.py migrate -a [name-of-app]\n$ heroku run python manage.py createcachetable -a [name-of-app]\n$ heroku run python manage.py createsuperuser -a [name-of-app]\n$ heroku run python manage.py wagtailsiteupdate [the-public-address] [the-apply-address] 443  -a [name-of-app]\n</code></pre> <ol> <li>Now add the \"release\" step back to the \"Procfile\" and deploy again.</li> </ol> <p>You should now have a running site.</p>"},{"location":"setup/deployment/heroku/#aws-s3","title":"AWS S3","text":"<p>Set up a bucket for private files and another for public files. Private files are uploads on submissions.</p> <p>Set these settings as a minimum:</p> <ul> <li>AWS_ACCESS_KEY_ID</li> <li>AWS_SECRET_ACCESS_KEY</li> <li>AWS_STORAGE_BUCKET_NAME most often same as AWS\\_PUBLIC\\_BUCKET\\_NAME</li> <li>AWS_PRIVATE_BUCKET_NAME</li> <li>AWS_PUBLIC_BUCKET_NAME</li> </ul> <p>Optionally set these as well:</p> <ul> <li>AWS_PUBLIC_CUSTOM_DOMAIN</li> <li>AWS_QUERYSTRING_EXPIRE</li> </ul>"},{"location":"setup/deployment/heroku/#private-bucket","title":"Private bucket","text":"<p>Properties:</p> <p>Versioning enabled. Default encryption enables AES-256</p> <p>CORS configuration:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;CORSConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"&gt;\n&lt;CORSRule&gt;\n    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;\n    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;\n    &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt;\n    &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;\n    &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;\n    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;\n&lt;/CORSRule&gt;\n&lt;/CORSConfiguration&gt;\n</code></pre>"},{"location":"setup/deployment/heroku/#public-bucket","title":"Public bucket","text":"<p>Properties:</p> <p>Versioning enabled.</p> <p>Access Control List:</p> <p>Public access -&gt; Everyone -&gt; List Yes</p> <p>CORS configuration:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;CORSConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"&gt;\n&lt;CORSRule&gt;\n    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;\n    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;\n    &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt;\n    &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;\n    &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;\n    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;\n&lt;/CORSRule&gt;\n&lt;/CORSConfiguration&gt;\n</code></pre> <p>Bucket policy:</p> <pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Id\": \"Policy1562302603386\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Stmt1562302600239\",\n            \"Effect\": \"Allow\",\n            \"Principal\": \"*\",\n            \"Action\": \"s3:GetObject\",\n            \"Resource\": \"arn:aws:s3:::public.example.com/*\"\n        }\n    ]\n}\n</code></pre>"},{"location":"setup/deployment/heroku/#mailgun","title":"Mailgun","text":"<p>Set:</p> <ul> <li>MAILGUN_API_KEY</li> </ul> <p>And it should just work.</p>"},{"location":"setup/deployment/stand-alone/","title":"Stand Alone","text":""},{"location":"setup/deployment/stand-alone/#standalone-servervps","title":"Standalone Server/VPS","text":"<p>This process was tested on Ubuntu 18.04LTS. It should work on any Debian-based system.</p>"},{"location":"setup/deployment/stand-alone/#get-the-code","title":"Get the code","text":"<p><code>git clone https://github.com/HyphaApp/hypha.git [your-site-directory]</code></p>"},{"location":"setup/deployment/stand-alone/#basic-installation-steps","title":"Basic installation steps.","text":"<p>These are the basic packages needed before you can start the installation process.</p> <ul> <li>python3-pip and python3-venv - install using  <code>sudo apt-get install python3-pip python3-venv</code></li> <li>postgresql version 12.x use <code>sudo apt-get install postgresql postgresql-contrib postgresql-server-dev-12</code></li> <li>to install nodejs version v16.x, use nodesource. Add the PPA to your sources list by running this script: <code>curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash -</code> then <code>sudo apt-get install nodejs</code></li> </ul>"},{"location":"setup/deployment/stand-alone/#python-virtual-environment","title":"Python virtual environment","text":"<p>Create the virtual environment, specify the python binary to use and the directory. Then source the activate script to activate the virtual environment. The last line tells Django what settings to use.</p> <pre><code>$ python3 -m venv venv/hypha\n$ source venv/hypha/bin/activate\n$ export DJANGO_SETTINGS_MODULE=hypha.settings.production\n</code></pre> <p>Inside your activated virtual environment you will use plain <code>python</code> and <code>pip</code> commands. Everything inside the virtual environment is python 3 since we specified that when we created it.</p>"},{"location":"setup/deployment/stand-alone/#install-python-packages","title":"Install Python packages","text":"<p>Next, install the required packages using:</p> <pre><code>$ pip install -r requirements.txt\n</code></pre>"},{"location":"setup/deployment/stand-alone/#install-node-packages","title":"Install Node packages","text":"<p>All the needed Node packages are listed in <code>package.json</code>. Install them with this command.</p> <pre><code>$ npm install\n</code></pre>"},{"location":"setup/deployment/stand-alone/#the-postgres-database","title":"The Postgres database","text":"<p>Postgresql is the database used. Start the server you installed above using <code>sudo service postgresql start</code>, then log into the postgres superuser, <code>sudo su - postgres</code> and enter the postgresql cli with <code>psql</code>. In the CLI, use these commands:</p> <ul> <li><code>CREATE DATABASE hypha;</code></li> <li><code>CREATE USER [linux username] WITH SUPERUSER LOGIN;</code></li> <li>Also, make sure that this user has trust access in pg_hba.conf.</li> </ul> <p>These settings can be restricted later as required.</p>"},{"location":"setup/deployment/stand-alone/#running-the-app","title":"Running the app","text":"<p>The application needs a secret key: <code>export SECRET_KEY='SOME SECRET KEY HERE'</code>.</p> <p>To begin with, set the <code>export SECURE_SSL_REDIRECT=false</code> to prevent SSL redirect. When you've set up SSL for your server, you can change that setting later.</p> <p>Then use the following commands to test run the server:</p> <ul> <li><code>npm run build</code></li> <li><code>python manage.py collectstatic --noinput</code></li> <li><code>python manage.py createcachetable</code></li> <li><code>python manage.py migrate --noinput</code></li> <li><code>python manage.py clear_cache --cache=default --cache=wagtailcache</code></li> <li><code>python manage.py createsuperuser</code></li> <li><code>python manage.py wagtailsiteupdate server.domain apply.server.domain 80</code></li> <li><code>python manage.py runserver</code> runs development server at [http://127.0.0.1:8000](http://127.0.0.1:8000)</li> </ul> <p>You should see the home page of the server. That's great. You can stop the server, and then we can then take the next steps.</p>"},{"location":"setup/deployment/stand-alone/#deploy-with-nginxgunicorn","title":"Deploy with nginx/gunicorn","text":"<p>Make sure gunicorn is installed it should be. Do a test run with gunicorn: <code>gunicorn --bind 0.0.0.0:&lt;some port&gt; hypha.wsgi:application</code> This might not work. It's OK if it doesn't work - you can go on anyway.</p> <p>To make gunicorn start automatically with systemd see https://docs.gunicorn.org/en/stable/deploy.html#systemd.</p> <p>Set up DNS so that server.domain and apply.server.domain point to the server you've installed the application. Install nginx if you haven't already <code>sudo apt-get install nginx</code>. You'll need to add two new config files for nginx in /etc/nginx/sites-available:</p> <p>public</p> <pre><code>server {\n    listen 80;\n    server_name server.domain;\n\n    client_max_body_size 2621440;\n\n    location /media/ {\n        alias /path/to/application/hypha/media/;\n    }\n\n    location /static/ {\n        alias /path/to/application/hypha/static/;\n    }\n\n    location / {\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://unix:/run/gunicorn.sock;\n    }\n\n}\n</code></pre> <p>apply</p> <pre><code>server {\n    listen 80;\n    server_name apply.server.domain;\n\n    client_max_body_size 2621440;\n\n    location /media/ {\n        alias /path/to/application/hypha/media/;\n    }\n\n    location /static/ {\n        alias /path/to/application/hypha/static/;\n    }\n\n    location / {\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://unix:/run/gunicorn.sock;\n    }\n}\n</code></pre> <p>The <code>client_max_body_size</code> configuration directive is very important. Hypha uploads files to the server in 2.5MB chunks. However, by default, nginx limits uploads to 1MB chunks. The result is that users of a Hypha system running \"behind\" nginx will see file upload failures for any file larger than 1MB. Using the <code>client_max_body_size</code> directive in the nginx <code>server</code> context is, therefore, required to make it possible for users to upload files that are bigger than 1MB in size.</p> <p>Symbolically link these to sites-enabled: <code>sudo ln -s /etc/nginx/sites-available/public /etc/nginx/sites-enabled &amp;&amp; sudo ln -s /etc/nginx/sites-available/apply /etc/nginx/sites-enabled</code>. Then restart nginx using <code>sudo systemctl restart nginx</code>.</p> <p>You should then be able to access your application at http://server.domain and http://apply.server.domain.</p>"},{"location":"setup/deployment/stand-alone/#adding-ssl-using-a-lets-encrypt-certificate","title":"Adding SSL using a Let's Encrypt certificate.","text":"<p>It's very easy to add SSL via a Let's Encrypt certificate.</p> <p>See instructions at https://certbot.eff.org.</p> <p>Follow the instructions, and you're done.</p>"},{"location":"setup/deployment/stand-alone/#administration","title":"Administration","text":"<p>The Django Administration panel is connected to the 'apply' domain: so access that via http://apply.server.domain/django-admin/ use the email address and password you set in the <code>python manage.py createsuperuser</code> step above. step above.</p> <p>The Apply dashboard is here: http://apply.server.domain/dashboard/. The Apply Wagtail admin: http://apply.server.domain/admin</p>"},{"location":"setup/deployment/stand-alone/#settings","title":"settings","text":"<p>Here is a list of settings that can be set as environment variables or in a <code>hypha/settings/local.py</code> file.</p> <p>None optional:</p> <pre><code>API_BASE_URL:                                  https://apply.example.org/api\nCACHE_CONTROL_MAX_AGE:                         14400\nCOOKIE_SECURE:                                 true\nDJANGO_SETTINGS_MODULE:                        hypha.settings.production\nEMAIL_HOST:                                    apply.example.org\nORG_EMAIL:                                     hello@example.org\nORG_GUIDE_URL:                                 https://guide.example.org/\nORG_LONG_NAME:                                 Long name of your organisation\nORG_SHORT_NAME:                                Short org name\nPRIMARY_HOST:                                  www.example.org\nPROJECTS_AUTO_CREATE:                          false\nPROJECTS_ENABLED:                              true\nSECRET_KEY:                                    [KEY]\nSEND_MESSAGES:                                 true\nSERVER_EMAIL:                                  app@apply.example.org\n</code></pre> <p>Optional:</p> <pre><code>ANYMAIL_WEBHOOK_SECRET:                        [KEY]\nAWS_ACCESS_KEY_ID:                             [KEY]\nAWS_DEFAULT_ACL:                               None\nAWS_MIGRATION_ACCESS_KEY_ID:                   [KEY]\nAWS_MIGRATION_BUCKET_NAME:                     backup.example.org\nAWS_MIGRATION_SECRET_ACCESS_KEY:               [KEY]\nAWS_PRIVATE_BUCKET_NAME:                       private.example.org\nAWS_PUBLIC_BUCKET_NAME:                        public.example.org\nAWS_PUBLIC_CUSTOM_DOMAIN:                      public.example.org\nAWS_QUERYSTRING_EXPIRE:                        600\nAWS_SECRET_ACCESS_KEY:                         [KEY]\nAWS_STORAGE_BUCKET_NAME:                       public.example.org\nBASIC_AUTH_ENABLED:                            true\nBASIC_AUTH_LOGIN:                              [USER]\nBASIC_AUTH_PASSWORD:                           [PASS]\nBASIC_AUTH_WHITELISTED_HTTP_HOSTS:             www.example.org,apply.example.org\nCLOUDFLARE_API_ZONEID:                         [KEY]\nCLOUDFLARE_BEARER_TOKEN:                       [KEY]\nMAILCHIMP_API_KEY:                             [KEY]-us10\nMAILCHIMP_LIST_ID:                             [ID]\nMAILGUN_API_KEY:                               [KEY]\nSEND_READY_FOR_REVIEW:                         false\nSLACK_DESTINATION_ROOM:                        #notify\nSLACK_DESTINATION_ROOM_COMMENTS:               #notes\nSLACK_DESTINATION_URL:                         https://slackbot-example.org/incoming/[KEY]\nSOCIAL_AUTH_GOOGLE_OAUTH2_KEY:                 [KEY]\nSOCIAL_AUTH_GOOGLE_OAUTH2_SECRET:              [KEY]\nSOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS: example.org\n</code></pre>"},{"location":"user-guides/creating-a-user-account/","title":"Creating a user account","text":""},{"location":"user-guides/creating-a-user-account/#using-command-line-interface","title":"Using command-line Interface","text":""},{"location":"user-guides/creating-a-user-account/#creating-superuser","title":"Creating superuser","text":"<pre><code>python manage.py createsuperuser\n</code></pre> <p>The user created is an \"administrator\" role, a default Django role that bypasses any access restrictions, like 'root' on a Unix server.</p> <p>This role should only be used by the person implementing/deploying Hypha for your organization, who may be part of the organization or may be an external contractor.</p>"},{"location":"user-guides/creating-a-user-account/#creating-additional-users","title":"Creating additional users","text":"<p>Creating additional users and assigning them Roles is done in Wagtail by someone with the Staff role.</p>"},{"location":"user-guides/creating-a-user-account/#using-wagtail-admin","title":"Using Wagtail Admin","text":"<p>Info</p> <p>Only users with the \"Staff\" role or a Super Admin can do this.</p> <p>In the WagTail Admin, you could create a new user account as well as assign a role to a user account by clicking on the \"Add User\" button on the far right-hand corner of the screen. You can also search for users in the search bar. User roles are essential to WagTail and the Hypha platform. System Administrators are able to oversee user accounts and manage the level of access for different users. </p> <p></p> <p>The \"Add User\" form will request your email, name, and role within the platform.</p> <p></p> <p>Selecting a role with enable to administrative access within the platform. Commonly used roles within the platform are Staff, Partner, and Reviewer.</p> <p></p>"},{"location":"user-guides/creating-a-user-account/#filtering-by-roles-and-status","title":"Filtering by Roles and Status","text":"<p>You could quickly search for user groups and their status (ie active or inactive) using the filter. The search function shows the user account's most recent login date. </p> <p></p>"},{"location":"user-guides/login/","title":"How to login","text":"<p>Step 1: Navigate to the organization's homepage.</p> <p>Step 2: Click the \"My [Organization Name]\" button in the upper-right corner of the screen.</p> <p></p> <p>Step 3: Enter your credentials in the \"Email address\" and \"Password\" fields &amp; click \"Login\"</p> <p></p>"},{"location":"user-guides/applications/creating-submisison-application/","title":"Creating Submission Application","text":"<p>All admin actions associated with applications can be access through the \u201cApply\u201d menu. This is found in the left navigation of the admin area. Clicking on the \u201cApply\u201d menu item opens up the sub menu.</p>"},{"location":"user-guides/applications/creating-submisison-application/#setup-a-form","title":"Setup a form","text":"<p>There are several types of Forms in the WagTail Amin. Forms are used to create a Fund.</p> <p></p> <p>Application Form</p> <p></p> <p>Review Form</p> <p></p> <p>Determination Form</p> <p></p> <p>In this guide menu elements will be referred to using \u201c[ ]\u201d to indicate the button and \u201c&gt;\u201d to indicate a subsequent menu item.</p>"},{"location":"user-guides/applications/creating-submisison-application/#add-a-new-fund-in-the-top-right-or-copy-an-existing-fund","title":"Add a new fund in the top right or copy an existing fund","text":"<ul> <li>You will then be able to add the following information</li> <li>Name of the fund (Title)</li> <li>Select External Reviewers</li> <li>Workflow<ul> <li>Workflow defines the stages and processes that the application should undertake</li> <li>Currently there are four workflows you can select.</li> </ul> </li> <li>Assign application forms<ul> <li>Select a previously created application form</li> <li>Number validated against the workflow chosen above (i.e. if it is a concept/proposal workflow 2 forms must be selected)</li> </ul> </li> <li>Assign review forms<ul> <li>Select a previously created review form</li> <li>Number validated against the workflow chosen above (i.e. if it is a concept/proposal workflow 2 forms must be selected)</li> </ul> </li> <li>Confirmation email</li> <li>Publishing the fund or lab is required to make sure that the application form is publicly visible to potential applicants.</li> </ul>"},{"location":"user-guides/applications/creating-submisison-application/#setup-a-round","title":"Setup a round","text":"<p>Currently users can copy, clone, or duplicate a Fund before creating a new form. Duplicating a Fund/Lab also duplicates the forms associated with that particular Fund or Lab. Users can not preview form, Fund needs to be published on live site for users to view draft or completed version</p> <ol> <li>Open Apply and click the bird icon on the bottom-right corner, then click the \u201cGo to Wagtail admin\u201d pop-up</li> <li>Click <code>Apply</code> &gt; <code>Rounds</code></li> </ol> <p></p> <p>3. Go to the round and click the Edit button:</p> <p></p> <p>4. Enter the Start Date (ie first day of the month) and End Date (ie last day of the month). Not selecting an end date allows the application to be open to the public indefinitely.</p> <p>5. Update the title and slug.</p> <p>6. Enter the Lead's name</p> <p></p> <p>7. Check to ensure the correct reviewers are highlighted</p> <p></p> <p>8. You could save a draft or publish. Publish means the application will be publicly visible to applicants.</p> <p></p>"},{"location":"user-guides/applications/submission-search/","title":"Filtering and searching application submissions (beta)","text":""},{"location":"user-guides/applications/submission-search/#using-search-to-filter-application-submissions","title":"Using search to filter application submissions","text":"<p>You can use advanced filters to search for application submissions that meet specific criteria.</p> <ul> <li>Filter archived applications submission: <code>is:archived</code>. You must have access to archived submissions and have show archived submissions turned on.</li> <li>Filter when applications were submitted: <code>submitted:2023-09-01</code>, <code>submitted:&gt;2023-01</code>, <code>submitted:&lt;=2023</code></li> <li>Filter when applications was last updated: <code>updated:2023-09-01</code>, <code>updated:&gt;2023-01</code>, <code>updated:&lt;=2023</code></li> <li>Filter your flagged submissions: <code>flagged:@me</code></li> </ul>"},{"location":"user-guides/applications/submission-search/#sharing-filters","title":"Sharing Filters","text":"<p>When you filter or sort issues and pull requests, your browser's URL is automatically updated to match the new view.</p> <p>You can send the URL that issues generates to any user, and they'll be able to see the same filter view that you see.</p> <p>For example, if you filter on submissions assigned to a Lead, and sort on the oldest open issues, your URL would update to something like the following:</p> <pre><code>?lead=33&amp;sort=updated-asc\n</code></pre>"}]}